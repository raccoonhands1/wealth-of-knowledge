/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var ao=Object.create;var Gt=Object.defineProperty;var no=Object.getOwnPropertyDescriptor;var so=Object.getOwnPropertyNames;var oo=Object.getPrototypeOf,io=Object.prototype.hasOwnProperty;var lo=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),uo=(t,e)=>{for(var r in e)Gt(t,r,{get:e[r],enumerable:!0})},ua=(t,e,r,a)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of so(e))!io.call(t,n)&&n!==r&&Gt(t,n,{get:()=>e[n],enumerable:!(a=no(e,n))||a.enumerable});return t};var co=(t,e,r)=>(r=t!=null?ao(oo(t)):{},ua(e||!t||!t.__esModule?Gt(r,"default",{value:t,enumerable:!0}):r,t)),po=t=>ua(Gt({},"__esModule",{value:!0}),t);var Xa=lo((ud,rt)=>{"use strict";var qo=typeof Buffer!="undefined",Ka=/"(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])"\s*:/,Wa=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/;function Ha(t,e,r){r==null&&e!==null&&typeof e=="object"&&(r=e,e=void 0),qo&&Buffer.isBuffer(t)&&(t=t.toString()),t&&t.charCodeAt(0)===65279&&(t=t.slice(1));let a=JSON.parse(t,e);if(a===null||typeof a!="object")return a;let n=r&&r.protoAction||"error",s=r&&r.constructorAction||"error";if(n==="ignore"&&s==="ignore")return a;if(n!=="ignore"&&s!=="ignore"){if(Ka.test(t)===!1&&Wa.test(t)===!1)return a}else if(n!=="ignore"&&s==="ignore"){if(Ka.test(t)===!1)return a}else if(Wa.test(t)===!1)return a;return Ya(a,{protoAction:n,constructorAction:s,safe:r&&r.safe})}function Ya(t,{protoAction:e="error",constructorAction:r="error",safe:a}={}){let n=[t];for(;n.length;){let s=n;n=[];for(let o of s){if(e!=="ignore"&&Object.prototype.hasOwnProperty.call(o,"__proto__")){if(a===!0)return null;if(e==="error")throw new SyntaxError("Object contains forbidden prototype property");delete o.__proto__}if(r!=="ignore"&&Object.prototype.hasOwnProperty.call(o,"constructor")&&Object.prototype.hasOwnProperty.call(o.constructor,"prototype")){if(a===!0)return null;if(r==="error")throw new SyntaxError("Object contains forbidden prototype property");delete o.constructor}for(let i in o){let l=o[i];l&&typeof l=="object"&&n.push(l)}}}return t}function Ir(t,e,r){let a=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return Ha(t,e,r)}finally{Error.stackTraceLimit=a}}function Uo(t,e){let r=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return Ha(t,e,{safe:!0})}catch(a){return null}finally{Error.stackTraceLimit=r}}rt.exports=Ir;rt.exports.default=Ir;rt.exports.parse=Ir;rt.exports.safeParse=Uo;rt.exports.scan=Ya});var Hc={};uo(Hc,{default:()=>_r});module.exports=po(Hc);var Z=require("obsidian");var ca="vercel.ai.error",mo=Symbol.for(ca),da,fo=class pa extends Error{constructor({name:e,message:r,cause:a}){super(r),this[da]=!0,this.name=e,this.cause=a}static isInstance(e){return pa.hasMarker(e,ca)}static hasMarker(e,r){let a=Symbol.for(r);return e!=null&&typeof e=="object"&&a in e&&typeof e[a]=="boolean"&&e[a]===!0}};da=mo;var T=fo,ma="AI_APICallError",fa=`vercel.ai.error.${ma}`,ho=Symbol.for(fa),ha,X=class extends T{constructor({message:t,url:e,requestBodyValues:r,statusCode:a,responseHeaders:n,responseBody:s,cause:o,isRetryable:i=a!=null&&(a===408||a===409||a===429||a>=500),data:l}){super({name:ma,message:t,cause:o}),this[ha]=!0,this.url=e,this.requestBodyValues=r,this.statusCode=a,this.responseHeaders=n,this.responseBody=s,this.isRetryable=i,this.data=l}static isInstance(t){return T.hasMarker(t,fa)}};ha=ho;var ga="AI_EmptyResponseBodyError",ya=`vercel.ai.error.${ga}`,go=Symbol.for(ya),va,_a=class extends T{constructor({message:t="Empty response body"}={}){super({name:ga,message:t}),this[va]=!0}static isInstance(t){return T.hasMarker(t,ya)}};va=go;function ba(t){return t==null?"unknown error":typeof t=="string"?t:t instanceof Error?t.message:JSON.stringify(t)}var wa="AI_InvalidArgumentError",xa=`vercel.ai.error.${wa}`,yo=Symbol.for(xa),Sa,Ta=class extends T{constructor({message:t,cause:e,argument:r}){super({name:wa,message:t,cause:e}),this[Sa]=!0,this.argument=r}static isInstance(t){return T.hasMarker(t,xa)}};Sa=yo;var Ia="AI_InvalidPromptError",Ea=`vercel.ai.error.${Ia}`,vo=Symbol.for(Ea),ka,Le=class extends T{constructor({prompt:t,message:e,cause:r}){super({name:Ia,message:`Invalid prompt: ${e}`,cause:r}),this[ka]=!0,this.prompt=t}static isInstance(t){return T.hasMarker(t,Ea)}};ka=vo;var Aa="AI_InvalidResponseDataError",Ca=`vercel.ai.error.${Aa}`,_o=Symbol.for(Ca),Ra,Wt=class extends T{constructor({data:t,message:e=`Invalid response data: ${JSON.stringify(t)}.`}){super({name:Aa,message:e}),this[Ra]=!0,this.data=t}static isInstance(t){return T.hasMarker(t,Ca)}};Ra=_o;var Na="AI_JSONParseError",Pa=`vercel.ai.error.${Na}`,bo=Symbol.for(Pa),Oa,Fe=class extends T{constructor({text:t,cause:e}){super({name:Na,message:`JSON parsing failed: Text: ${t}.
Error message: ${ba(e)}`,cause:e}),this[Oa]=!0,this.text=t}static isInstance(t){return T.hasMarker(t,Pa)}};Oa=bo;var Ma="AI_LoadAPIKeyError",Da=`vercel.ai.error.${Ma}`,wo=Symbol.for(Da),ja,Et=class extends T{constructor({message:t}){super({name:Ma,message:t}),this[ja]=!0}static isInstance(t){return T.hasMarker(t,Da)}};ja=wo;var xo="AI_LoadSettingError",So=`vercel.ai.error.${xo}`,To=Symbol.for(So),Io;Io=To;var Eo="AI_NoContentGeneratedError",ko=`vercel.ai.error.${Eo}`,Ao=Symbol.for(ko),Co;Co=Ao;var $a="AI_NoSuchModelError",qa=`vercel.ai.error.${$a}`,Ro=Symbol.for(qa),Ua,La=class extends T{constructor({errorName:t=$a,modelId:e,modelType:r,message:a=`No such ${r}: ${e}`}){super({name:t,message:a}),this[Ua]=!0,this.modelId=e,this.modelType=r}static isInstance(t){return T.hasMarker(t,qa)}};Ua=Ro;var No="AI_TooManyEmbeddingValuesForCallError",Po=`vercel.ai.error.${No}`,Oo=Symbol.for(Po),Mo;Mo=Oo;var Fa="AI_TypeValidationError",Va=`vercel.ai.error.${Fa}`,Do=Symbol.for(Va),Za,jo=class Sr extends T{constructor({value:e,cause:r}){super({name:Fa,message:`Type validation failed: Value: ${JSON.stringify(e)}.
Error message: ${ba(r)}`,cause:r}),this[Za]=!0,this.value=e}static isInstance(e){return T.hasMarker(e,Va)}static wrap({value:e,cause:r}){return Sr.isInstance(r)&&r.value===e?r:new Sr({value:e,cause:r})}};Za=Do;var Q=jo,Ja="AI_UnsupportedFunctionalityError",Ba=`vercel.ai.error.${Ja}`,$o=Symbol.for(Ba),za,Ie=class extends T{constructor({functionality:t,message:e=`'${t}' functionality not supported.`}){super({name:Ja,message:e}),this[za]=!0,this.functionality=t}static isInstance(t){return T.hasMarker(t,Ba)}};za=$o;function Kt(t){return t===null||typeof t=="string"||typeof t=="number"||typeof t=="boolean"?!0:Array.isArray(t)?t.every(Kt):typeof t=="object"?Object.entries(t).every(([e,r])=>typeof e=="string"&&Kt(r)):!1}function Tr(t){return Array.isArray(t)&&t.every(Kt)}function Ht(t){return t!=null&&typeof t=="object"&&Object.entries(t).every(([e,r])=>typeof e=="string"&&Kt(r))}var Ga=(t,e=21)=>(r=e)=>{let a="",n=r|0;for(;n--;)a+=t[Math.random()*t.length|0];return a};var rr=co(Xa(),1);var Lo=Object.defineProperty,Fo=(t,e,r)=>e in t?Lo(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Yt=(t,e,r)=>Fo(t,typeof e!="symbol"?e+"":e,r),Xt=class extends Error{constructor(e,r){super(e),Yt(this,"type"),Yt(this,"field"),Yt(this,"value"),Yt(this,"line"),this.name="ParseError",this.type=r.type,this.field=r.field,this.value=r.value,this.line=r.line}};function Er(t){}function Qa(t){let{onEvent:e=Er,onError:r=Er,onRetry:a=Er,onComment:n}=t,s="",o=!0,i,l="",u="";function d(v){let k=o?v.replace(/^\xEF\xBB\xBF/,""):v,[N,D]=Vo(`${s}${k}`);for(let I of N)f(I);s=D,o=!1}function f(v){if(v===""){A();return}if(v.startsWith(":")){n&&n(v.slice(v.startsWith(": ")?2:1));return}let k=v.indexOf(":");if(k!==-1){let N=v.slice(0,k),D=v[k+1]===" "?2:1,I=v.slice(k+D);w(N,I,v);return}w(v,"",v)}function w(v,k,N){switch(v){case"event":u=k;break;case"data":l=`${l}${k}
`;break;case"id":i=k.includes("\0")?void 0:k;break;case"retry":/^\d+$/.test(k)?a(parseInt(k,10)):r(new Xt(`Invalid \`retry\` value: "${k}"`,{type:"invalid-retry",value:k,line:N}));break;default:r(new Xt(`Unknown field "${v.length>20?`${v.slice(0,20)}\u2026`:v}"`,{type:"unknown-field",field:v,value:k,line:N}));break}}function A(){l.length>0&&e({id:i,event:u||void 0,data:l.endsWith(`
`)?l.slice(0,-1):l}),i=void 0,l="",u=""}function E(v={}){s&&v.consume&&f(s),i=void 0,l="",u="",s=""}return{feed:d,reset:E}}function Vo(t){let e=[],r="",a=t.length;for(let n=0;n<a;n++){let s=t[n];s==="\r"&&t[n+1]===`
`?(e.push(r),r="",n++):s==="\r"||s===`
`?(e.push(r),r=""):r+=s}return[e,r]}var Qt=class extends TransformStream{constructor({onError:e,onRetry:r,onComment:a}={}){let n;super({start(s){n=Qa({onEvent:o=>{s.enqueue(o)},onError(o){e==="terminate"?s.error(o):typeof e=="function"&&e(o)},onRetry:r,onComment:a})},transform(s){n.feed(s)}})}};function kr(...t){return t.reduce((e,r)=>({...e,...r!=null?r:{}}),{})}function en(t){return new ReadableStream({async pull(e){try{let{value:r,done:a}=await t.next();a?e.close():e.enqueue(r)}catch(r){e.error(r)}},cancel(){}})}async function tn(t){return t==null?Promise.resolve():new Promise(e=>setTimeout(e,t))}function er(t){let e={};return t.headers.forEach((r,a)=>{e[a]=r}),e}var de=({prefix:t,size:e=16,alphabet:r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:a="-"}={})=>{let n=Ga(r,e);if(t==null)return n;if(r.includes(a))throw new Ta({argument:"separator",message:`The separator "${a}" must not be part of the alphabet "${r}".`});return s=>`${t}${a}${n(s)}`},tr=de();function rn(t){return t==null?"unknown error":typeof t=="string"?t:t instanceof Error?t.message:JSON.stringify(t)}function Zo(t){return Object.fromEntries(Object.entries(t).filter(([e,r])=>r!=null))}function kt(t){return t instanceof Error&&(t.name==="AbortError"||t.name==="TimeoutError")}function an({apiKey:t,environmentVariableName:e,apiKeyParameterName:r="apiKey",description:a}){if(typeof t=="string")return t;if(t!=null)throw new Et({message:`${a} API key must be a string.`});if(typeof process=="undefined")throw new Et({message:`${a} API key is missing. Pass it using the '${r}' parameter. Environment variables is not supported in this environment.`});if(t=process.env[e],t==null)throw new Et({message:`${a} API key is missing. Pass it using the '${r}' parameter or the ${e} environment variable.`});if(typeof t!="string")throw new Et({message:`${a} API key must be a string. The value of the ${e} environment variable is not a string.`});return t}var At=Symbol.for("vercel.ai.validator");function Jo(t){return{[At]:!0,validate:t}}function Bo(t){return typeof t=="object"&&t!==null&&At in t&&t[At]===!0&&"validate"in t}function zo(t){return Bo(t)?t:Go(t)}function Go(t){return Jo(e=>{let r=t.safeParse(e);return r.success?{success:!0,value:r.data}:{success:!1,error:r.error}})}function Ko({value:t,schema:e}){let r=ve({value:t,schema:e});if(!r.success)throw Q.wrap({value:t,cause:r.error});return r.value}function ve({value:t,schema:e}){let r=zo(e);try{if(r.validate==null)return{success:!0,value:t};let a=r.validate(t);return a.success?a:{success:!1,error:Q.wrap({value:t,cause:a.error})}}catch(a){return{success:!1,error:Q.wrap({value:t,cause:a})}}}function Wo({text:t,schema:e}){try{let r=rr.default.parse(t);return e==null?r:Ko({value:r,schema:e})}catch(r){throw Fe.isInstance(r)||Q.isInstance(r)?r:new Fe({text:t,cause:r})}}function Ee({text:t,schema:e}){try{let r=rr.default.parse(t);if(e==null)return{success:!0,value:r,rawValue:r};let a=ve({value:r,schema:e});return a.success?{...a,rawValue:r}:a}catch(r){return{success:!1,error:Fe.isInstance(r)?r:new Fe({text:t,cause:r})}}}function Ar(t){try{return rr.default.parse(t),!0}catch(e){return!1}}var Ho=()=>globalThis.fetch,Cr=async({url:t,headers:e,body:r,failedResponseHandler:a,successfulResponseHandler:n,abortSignal:s,fetch:o})=>Yo({url:t,headers:{"Content-Type":"application/json",...e},body:{content:JSON.stringify(r),values:r},failedResponseHandler:a,successfulResponseHandler:n,abortSignal:s,fetch:o}),Yo=async({url:t,headers:e={},body:r,successfulResponseHandler:a,failedResponseHandler:n,abortSignal:s,fetch:o=Ho()})=>{try{let i=await o(t,{method:"POST",headers:Zo(e),body:r.content,signal:s}),l=er(i);if(!i.ok){let u;try{u=await n({response:i,url:t,requestBodyValues:r.values})}catch(d){throw kt(d)||X.isInstance(d)?d:new X({message:"Failed to process error response",cause:d,statusCode:i.status,url:t,responseHeaders:l,requestBodyValues:r.values})}throw u.value}try{return await a({response:i,url:t,requestBodyValues:r.values})}catch(u){throw u instanceof Error&&(kt(u)||X.isInstance(u))?u:new X({message:"Failed to process successful response",cause:u,statusCode:i.status,url:t,responseHeaders:l,requestBodyValues:r.values})}}catch(i){if(kt(i))throw i;if(i instanceof TypeError&&i.message==="fetch failed"){let l=i.cause;if(l!=null)throw new X({message:`Cannot connect to API: ${l.message}`,cause:l,url:t,requestBodyValues:r.values,isRetryable:!0})}throw i}};var nn=({errorSchema:t,errorToMessage:e,isRetryable:r})=>async({response:a,url:n,requestBodyValues:s})=>{let o=await a.text(),i=er(a);if(o.trim()==="")return{responseHeaders:i,value:new X({message:a.statusText,url:n,requestBodyValues:s,statusCode:a.status,responseHeaders:i,responseBody:o,isRetryable:r==null?void 0:r(a)})};try{let l=Wo({text:o,schema:t});return{responseHeaders:i,value:new X({message:e(l),url:n,requestBodyValues:s,statusCode:a.status,responseHeaders:i,responseBody:o,data:l,isRetryable:r==null?void 0:r(a,l)})}}catch(l){return{responseHeaders:i,value:new X({message:a.statusText,url:n,requestBodyValues:s,statusCode:a.status,responseHeaders:i,responseBody:o,isRetryable:r==null?void 0:r(a)})}}},sn=t=>async({response:e})=>{let r=er(e);if(e.body==null)throw new _a({});return{responseHeaders:r,value:e.body.pipeThrough(new TextDecoderStream).pipeThrough(new Qt).pipeThrough(new TransformStream({transform({data:a},n){a!=="[DONE]"&&n.enqueue(Ee({text:a,schema:t}))}}))}};var on=t=>async({response:e,url:r,requestBodyValues:a})=>{let n=await e.text(),s=Ee({text:n,schema:t}),o=er(e);if(!s.success)throw new X({message:"Invalid JSON response",cause:s.error,statusCode:e.status,responseHeaders:o,responseBody:n,url:r,requestBodyValues:a});return{responseHeaders:o,value:s.value,rawValue:s.rawValue}};var{btoa:Xo,atob:Qo}=globalThis;function ln(t){let e=t.replace(/-/g,"+").replace(/_/g,"/"),r=Qo(e);return Uint8Array.from(r,a=>a.codePointAt(0))}function Ct(t){let e="";for(let r=0;r<t.length;r++)e+=String.fromCodePoint(t[r]);return Xo(e)}function un(t){return t==null?void 0:t.replace(/\/$/,"")}var dn=Symbol("Let zodToJsonSchema decide on which parser to use");var cn={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},pn=t=>typeof t=="string"?{...cn,name:t}:{...cn,...t};var mn=t=>{let e=pn(t),r=e.name!==void 0?[...e.basePath,e.definitionPath,e.name]:e.basePath;return{...e,currentPath:r,propertyPath:void 0,seen:new Map(Object.entries(e.definitions).map(([a,n])=>[n._def,{def:n._def,path:[...e.basePath,e.definitionPath,a],jsonSchema:void 0}]))}};function Rr(t,e,r,a){a!=null&&a.errorMessages&&r&&(t.errorMessage={...t.errorMessage,[e]:r})}function C(t,e,r,a,n){t[e]=r,Rr(t,e,a,n)}var R;(function(t){t.assertEqual=n=>n;function e(n){}t.assertIs=e;function r(n){throw new Error}t.assertNever=r,t.arrayToEnum=n=>{let s={};for(let o of n)s[o]=o;return s},t.getValidEnumValues=n=>{let s=t.objectKeys(n).filter(i=>typeof n[n[i]]!="number"),o={};for(let i of s)o[i]=n[i];return t.objectValues(o)},t.objectValues=n=>t.objectKeys(n).map(function(s){return n[s]}),t.objectKeys=typeof Object.keys=="function"?n=>Object.keys(n):n=>{let s=[];for(let o in n)Object.prototype.hasOwnProperty.call(n,o)&&s.push(o);return s},t.find=(n,s)=>{for(let o of n)if(s(o))return o},t.isInteger=typeof Number.isInteger=="function"?n=>Number.isInteger(n):n=>typeof n=="number"&&isFinite(n)&&Math.floor(n)===n;function a(n,s=" | "){return n.map(o=>typeof o=="string"?`'${o}'`:o).join(s)}t.joinValues=a,t.jsonStringifyReplacer=(n,s)=>typeof s=="bigint"?s.toString():s})(R||(R={}));var Pr;(function(t){t.mergeShapes=(e,r)=>({...e,...r})})(Pr||(Pr={}));var g=R.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Ae=t=>{switch(typeof t){case"undefined":return g.undefined;case"string":return g.string;case"number":return isNaN(t)?g.nan:g.number;case"boolean":return g.boolean;case"function":return g.function;case"bigint":return g.bigint;case"symbol":return g.symbol;case"object":return Array.isArray(t)?g.array:t===null?g.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?g.promise:typeof Map!="undefined"&&t instanceof Map?g.map:typeof Set!="undefined"&&t instanceof Set?g.set:typeof Date!="undefined"&&t instanceof Date?g.date:g.object;default:return g.unknown}},p=R.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),ei=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:"),z=class extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=a=>{this.issues=[...this.issues,a]},this.addIssues=(a=[])=>{this.issues=[...this.issues,...a]};let r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}format(e){let r=e||function(s){return s.message},a={_errors:[]},n=s=>{for(let o of s.issues)if(o.code==="invalid_union")o.unionErrors.map(n);else if(o.code==="invalid_return_type")n(o.returnTypeError);else if(o.code==="invalid_arguments")n(o.argumentsError);else if(o.path.length===0)a._errors.push(r(o));else{let i=a,l=0;for(;l<o.path.length;){let u=o.path[l];l===o.path.length-1?(i[u]=i[u]||{_errors:[]},i[u]._errors.push(r(o))):i[u]=i[u]||{_errors:[]},i=i[u],l++}}};return n(this),a}static assert(e){if(!(e instanceof z))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,R.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){let r={},a=[];for(let n of this.issues)n.path.length>0?(r[n.path[0]]=r[n.path[0]]||[],r[n.path[0]].push(e(n))):a.push(e(n));return{formErrors:a,fieldErrors:r}}get formErrors(){return this.flatten()}};z.create=t=>new z(t);var st=(t,e)=>{let r;switch(t.code){case p.invalid_type:t.received===g.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case p.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,R.jsonStringifyReplacer)}`;break;case p.unrecognized_keys:r=`Unrecognized key(s) in object: ${R.joinValues(t.keys,", ")}`;break;case p.invalid_union:r="Invalid input";break;case p.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${R.joinValues(t.options)}`;break;case p.invalid_enum_value:r=`Invalid enum value. Expected ${R.joinValues(t.options)}, received '${t.received}'`;break;case p.invalid_arguments:r="Invalid function arguments";break;case p.invalid_return_type:r="Invalid function return type";break;case p.invalid_date:r="Invalid date";break;case p.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:R.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case p.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case p.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case p.custom:r="Invalid input";break;case p.invalid_intersection_types:r="Intersection results could not be merged";break;case p.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case p.not_finite:r="Number must be finite";break;default:r=e.defaultError,R.assertNever(t)}return{message:r}},yn=st;function ti(t){yn=t}function ar(){return yn}var nr=t=>{let{data:e,path:r,errorMaps:a,issueData:n}=t,s=[...r,...n.path||[]],o={...n,path:s};if(n.message!==void 0)return{...n,path:s,message:n.message};let i="",l=a.filter(u=>!!u).slice().reverse();for(let u of l)i=u(o,{data:e,defaultError:i}).message;return{...n,path:s,message:i}},ri=[];function h(t,e){let r=ar(),a=nr({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,r,r===st?void 0:st].filter(n=>!!n)});t.common.issues.push(a)}var L=class{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){let a=[];for(let n of r){if(n.status==="aborted")return b;n.status==="dirty"&&e.dirty(),a.push(n.value)}return{status:e.value,value:a}}static async mergeObjectAsync(e,r){let a=[];for(let n of r){let s=await n.key,o=await n.value;a.push({key:s,value:o})}return L.mergeObjectSync(e,a)}static mergeObjectSync(e,r){let a={};for(let n of r){let{key:s,value:o}=n;if(s.status==="aborted"||o.status==="aborted")return b;s.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),s.value!=="__proto__"&&(typeof o.value!="undefined"||n.alwaysSet)&&(a[s.value]=o.value)}return{status:e.value,value:a}}},b=Object.freeze({status:"aborted"}),nt=t=>({status:"dirty",value:t}),G=t=>({status:"valid",value:t}),Or=t=>t.status==="aborted",Mr=t=>t.status==="dirty",Ve=t=>t.status==="valid",Pt=t=>typeof Promise!="undefined"&&t instanceof Promise;function sr(t,e,r,a){if(r==="a"&&!a)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!a:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?a:r==="a"?a.call(t):a?a.value:e.get(t)}function vn(t,e,r,a,n){if(a==="m")throw new TypeError("Private method is not writable");if(a==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return a==="a"?n.call(t,r):n?n.value=r:e.set(t,r),r}var y;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(y||(y={}));var Rt,Nt,oe=class{constructor(e,r,a,n){this._cachedPath=[],this.parent=e,this.data=r,this._path=a,this._key=n}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},fn=(t,e)=>{if(Ve(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let r=new z(t.common.issues);return this._error=r,this._error}}};function x(t){if(!t)return{};let{errorMap:e,invalid_type_error:r,required_error:a,description:n}=t;if(e&&(r||a))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:n}:{errorMap:(o,i)=>{var l,u;let{message:d}=t;return o.code==="invalid_enum_value"?{message:d!=null?d:i.defaultError}:typeof i.data=="undefined"?{message:(l=d!=null?d:a)!==null&&l!==void 0?l:i.defaultError}:o.code!=="invalid_type"?{message:i.defaultError}:{message:(u=d!=null?d:r)!==null&&u!==void 0?u:i.defaultError}},description:n}}var S=class{get description(){return this._def.description}_getType(e){return Ae(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:Ae(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new L,ctx:{common:e.parent.common,data:e.data,parsedType:Ae(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let r=this._parse(e);if(Pt(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){let r=this._parse(e);return Promise.resolve(r)}parse(e,r){let a=this.safeParse(e,r);if(a.success)return a.data;throw a.error}safeParse(e,r){var a;let n={common:{issues:[],async:(a=r==null?void 0:r.async)!==null&&a!==void 0?a:!1,contextualErrorMap:r==null?void 0:r.errorMap},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ae(e)},s=this._parseSync({data:e,path:n.path,parent:n});return fn(n,s)}"~validate"(e){var r,a;let n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ae(e)};if(!this["~standard"].async)try{let s=this._parseSync({data:e,path:[],parent:n});return Ve(s)?{value:s.value}:{issues:n.common.issues}}catch(s){!((a=(r=s==null?void 0:s.message)===null||r===void 0?void 0:r.toLowerCase())===null||a===void 0)&&a.includes("encountered")&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:n}).then(s=>Ve(s)?{value:s.value}:{issues:n.common.issues})}async parseAsync(e,r){let a=await this.safeParseAsync(e,r);if(a.success)return a.data;throw a.error}async safeParseAsync(e,r){let a={common:{issues:[],contextualErrorMap:r==null?void 0:r.errorMap,async:!0},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ae(e)},n=this._parse({data:e,path:a.path,parent:a}),s=await(Pt(n)?n:Promise.resolve(n));return fn(a,s)}refine(e,r){let a=n=>typeof r=="string"||typeof r=="undefined"?{message:r}:typeof r=="function"?r(n):r;return this._refinement((n,s)=>{let o=e(n),i=()=>s.addIssue({code:p.custom,...a(n)});return typeof Promise!="undefined"&&o instanceof Promise?o.then(l=>l?!0:(i(),!1)):o?!0:(i(),!1)})}refinement(e,r){return this._refinement((a,n)=>e(a)?!0:(n.addIssue(typeof r=="function"?r(a,n):r),!1))}_refinement(e){return new re({schema:this,typeName:m.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:r=>this["~validate"](r)}}optional(){return H.create(this,this._def)}nullable(){return xe.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return te.create(this)}promise(){return je.create(this,this._def)}or(e){return ze.create([this,e],this._def)}and(e){return Ge.create(this,e,this._def)}transform(e){return new re({...x(this._def),schema:this,typeName:m.ZodEffects,effect:{type:"transform",transform:e}})}default(e){let r=typeof e=="function"?e:()=>e;return new Xe({...x(this._def),innerType:this,defaultValue:r,typeName:m.ZodDefault})}brand(){return new Ot({typeName:m.ZodBranded,type:this,...x(this._def)})}catch(e){let r=typeof e=="function"?e:()=>e;return new Qe({...x(this._def),innerType:this,catchValue:r,typeName:m.ZodCatch})}describe(e){let r=this.constructor;return new r({...this._def,description:e})}pipe(e){return et.create(this,e)}readonly(){return tt.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},ai=/^c[^\s-]{8,}$/i,ni=/^[0-9a-z]+$/,si=/^[0-9A-HJKMNP-TV-Z]{26}$/i,oi=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,ii=/^[a-z0-9_-]{21}$/i,li=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,ui=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,ci=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,di="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",Nr,pi=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,mi=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,fi=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,hi=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,gi=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,yi=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,_n="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",vi=new RegExp(`^${_n}$`);function bn(t){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`),e}function _i(t){return new RegExp(`^${bn(t)}$`)}function wn(t){let e=`${_n}T${bn(t)}`,r=[];return r.push(t.local?"Z?":"Z"),t.offset&&r.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${r.join("|")})`,new RegExp(`^${e}$`)}function bi(t,e){return!!((e==="v4"||!e)&&pi.test(t)||(e==="v6"||!e)&&fi.test(t))}function wi(t,e){if(!li.test(t))return!1;try{let[r]=t.split("."),a=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),n=JSON.parse(atob(a));return!(typeof n!="object"||n===null||!n.typ||!n.alg||e&&n.alg!==e)}catch(r){return!1}}function xi(t,e){return!!((e==="v4"||!e)&&mi.test(t)||(e==="v6"||!e)&&hi.test(t))}var ee=class extends S{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==g.string){let s=this._getOrReturnCtx(e);return h(s,{code:p.invalid_type,expected:g.string,received:s.parsedType}),b}let a=new L,n;for(let s of this._def.checks)if(s.kind==="min")e.data.length<s.value&&(n=this._getOrReturnCtx(e,n),h(n,{code:p.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),a.dirty());else if(s.kind==="max")e.data.length>s.value&&(n=this._getOrReturnCtx(e,n),h(n,{code:p.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),a.dirty());else if(s.kind==="length"){let o=e.data.length>s.value,i=e.data.length<s.value;(o||i)&&(n=this._getOrReturnCtx(e,n),o?h(n,{code:p.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):i&&h(n,{code:p.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),a.dirty())}else if(s.kind==="email")ci.test(e.data)||(n=this._getOrReturnCtx(e,n),h(n,{validation:"email",code:p.invalid_string,message:s.message}),a.dirty());else if(s.kind==="emoji")Nr||(Nr=new RegExp(di,"u")),Nr.test(e.data)||(n=this._getOrReturnCtx(e,n),h(n,{validation:"emoji",code:p.invalid_string,message:s.message}),a.dirty());else if(s.kind==="uuid")oi.test(e.data)||(n=this._getOrReturnCtx(e,n),h(n,{validation:"uuid",code:p.invalid_string,message:s.message}),a.dirty());else if(s.kind==="nanoid")ii.test(e.data)||(n=this._getOrReturnCtx(e,n),h(n,{validation:"nanoid",code:p.invalid_string,message:s.message}),a.dirty());else if(s.kind==="cuid")ai.test(e.data)||(n=this._getOrReturnCtx(e,n),h(n,{validation:"cuid",code:p.invalid_string,message:s.message}),a.dirty());else if(s.kind==="cuid2")ni.test(e.data)||(n=this._getOrReturnCtx(e,n),h(n,{validation:"cuid2",code:p.invalid_string,message:s.message}),a.dirty());else if(s.kind==="ulid")si.test(e.data)||(n=this._getOrReturnCtx(e,n),h(n,{validation:"ulid",code:p.invalid_string,message:s.message}),a.dirty());else if(s.kind==="url")try{new URL(e.data)}catch(o){n=this._getOrReturnCtx(e,n),h(n,{validation:"url",code:p.invalid_string,message:s.message}),a.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(e.data)||(n=this._getOrReturnCtx(e,n),h(n,{validation:"regex",code:p.invalid_string,message:s.message}),a.dirty())):s.kind==="trim"?e.data=e.data.trim():s.kind==="includes"?e.data.includes(s.value,s.position)||(n=this._getOrReturnCtx(e,n),h(n,{code:p.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),a.dirty()):s.kind==="toLowerCase"?e.data=e.data.toLowerCase():s.kind==="toUpperCase"?e.data=e.data.toUpperCase():s.kind==="startsWith"?e.data.startsWith(s.value)||(n=this._getOrReturnCtx(e,n),h(n,{code:p.invalid_string,validation:{startsWith:s.value},message:s.message}),a.dirty()):s.kind==="endsWith"?e.data.endsWith(s.value)||(n=this._getOrReturnCtx(e,n),h(n,{code:p.invalid_string,validation:{endsWith:s.value},message:s.message}),a.dirty()):s.kind==="datetime"?wn(s).test(e.data)||(n=this._getOrReturnCtx(e,n),h(n,{code:p.invalid_string,validation:"datetime",message:s.message}),a.dirty()):s.kind==="date"?vi.test(e.data)||(n=this._getOrReturnCtx(e,n),h(n,{code:p.invalid_string,validation:"date",message:s.message}),a.dirty()):s.kind==="time"?_i(s).test(e.data)||(n=this._getOrReturnCtx(e,n),h(n,{code:p.invalid_string,validation:"time",message:s.message}),a.dirty()):s.kind==="duration"?ui.test(e.data)||(n=this._getOrReturnCtx(e,n),h(n,{validation:"duration",code:p.invalid_string,message:s.message}),a.dirty()):s.kind==="ip"?bi(e.data,s.version)||(n=this._getOrReturnCtx(e,n),h(n,{validation:"ip",code:p.invalid_string,message:s.message}),a.dirty()):s.kind==="jwt"?wi(e.data,s.alg)||(n=this._getOrReturnCtx(e,n),h(n,{validation:"jwt",code:p.invalid_string,message:s.message}),a.dirty()):s.kind==="cidr"?xi(e.data,s.version)||(n=this._getOrReturnCtx(e,n),h(n,{validation:"cidr",code:p.invalid_string,message:s.message}),a.dirty()):s.kind==="base64"?gi.test(e.data)||(n=this._getOrReturnCtx(e,n),h(n,{validation:"base64",code:p.invalid_string,message:s.message}),a.dirty()):s.kind==="base64url"?yi.test(e.data)||(n=this._getOrReturnCtx(e,n),h(n,{validation:"base64url",code:p.invalid_string,message:s.message}),a.dirty()):R.assertNever(s);return{status:a.value,value:e.data}}_regex(e,r,a){return this.refinement(n=>e.test(n),{validation:r,code:p.invalid_string,...y.errToObj(a)})}_addCheck(e){return new ee({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...y.errToObj(e)})}url(e){return this._addCheck({kind:"url",...y.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...y.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...y.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...y.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...y.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...y.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...y.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...y.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...y.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...y.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...y.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...y.errToObj(e)})}datetime(e){var r,a;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)=="undefined"?null:e==null?void 0:e.precision,offset:(r=e==null?void 0:e.offset)!==null&&r!==void 0?r:!1,local:(a=e==null?void 0:e.local)!==null&&a!==void 0?a:!1,...y.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)=="undefined"?null:e==null?void 0:e.precision,...y.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...y.errToObj(e)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...y.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r==null?void 0:r.position,...y.errToObj(r==null?void 0:r.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...y.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...y.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...y.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...y.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...y.errToObj(r)})}nonempty(e){return this.min(1,y.errToObj(e))}trim(){return new ee({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new ee({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new ee({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};ee.create=t=>{var e;return new ee({checks:[],typeName:m.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...x(t)})};function Si(t,e){let r=(t.toString().split(".")[1]||"").length,a=(e.toString().split(".")[1]||"").length,n=r>a?r:a,s=parseInt(t.toFixed(n).replace(".","")),o=parseInt(e.toFixed(n).replace(".",""));return s%o/Math.pow(10,n)}var _e=class extends S{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==g.number){let s=this._getOrReturnCtx(e);return h(s,{code:p.invalid_type,expected:g.number,received:s.parsedType}),b}let a,n=new L;for(let s of this._def.checks)s.kind==="int"?R.isInteger(e.data)||(a=this._getOrReturnCtx(e,a),h(a,{code:p.invalid_type,expected:"integer",received:"float",message:s.message}),n.dirty()):s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(a=this._getOrReturnCtx(e,a),h(a,{code:p.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),n.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(a=this._getOrReturnCtx(e,a),h(a,{code:p.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),n.dirty()):s.kind==="multipleOf"?Si(e.data,s.value)!==0&&(a=this._getOrReturnCtx(e,a),h(a,{code:p.not_multiple_of,multipleOf:s.value,message:s.message}),n.dirty()):s.kind==="finite"?Number.isFinite(e.data)||(a=this._getOrReturnCtx(e,a),h(a,{code:p.not_finite,message:s.message}),n.dirty()):R.assertNever(s);return{status:n.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,y.toString(r))}gt(e,r){return this.setLimit("min",e,!1,y.toString(r))}lte(e,r){return this.setLimit("max",e,!0,y.toString(r))}lt(e,r){return this.setLimit("max",e,!1,y.toString(r))}setLimit(e,r,a,n){return new _e({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:a,message:y.toString(n)}]})}_addCheck(e){return new _e({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:y.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:y.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:y.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:y.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:y.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:y.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:y.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:y.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:y.toString(e)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&R.isInteger(e.value))}get isFinite(){let e=null,r=null;for(let a of this._def.checks){if(a.kind==="finite"||a.kind==="int"||a.kind==="multipleOf")return!0;a.kind==="min"?(r===null||a.value>r)&&(r=a.value):a.kind==="max"&&(e===null||a.value<e)&&(e=a.value)}return Number.isFinite(r)&&Number.isFinite(e)}};_e.create=t=>new _e({checks:[],typeName:m.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...x(t)});var be=class extends S{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch(s){return this._getInvalidInput(e)}if(this._getType(e)!==g.bigint)return this._getInvalidInput(e);let a,n=new L;for(let s of this._def.checks)s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(a=this._getOrReturnCtx(e,a),h(a,{code:p.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),n.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(a=this._getOrReturnCtx(e,a),h(a,{code:p.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),n.dirty()):s.kind==="multipleOf"?e.data%s.value!==BigInt(0)&&(a=this._getOrReturnCtx(e,a),h(a,{code:p.not_multiple_of,multipleOf:s.value,message:s.message}),n.dirty()):R.assertNever(s);return{status:n.value,value:e.data}}_getInvalidInput(e){let r=this._getOrReturnCtx(e);return h(r,{code:p.invalid_type,expected:g.bigint,received:r.parsedType}),b}gte(e,r){return this.setLimit("min",e,!0,y.toString(r))}gt(e,r){return this.setLimit("min",e,!1,y.toString(r))}lte(e,r){return this.setLimit("max",e,!0,y.toString(r))}lt(e,r){return this.setLimit("max",e,!1,y.toString(r))}setLimit(e,r,a,n){return new be({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:a,message:y.toString(n)}]})}_addCheck(e){return new be({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:y.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:y.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:y.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:y.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:y.toString(r)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};be.create=t=>{var e;return new be({checks:[],typeName:m.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...x(t)})};var Ze=class extends S{_parse(e){if(this._def.coerce&&(e.data=Boolean(e.data)),this._getType(e)!==g.boolean){let a=this._getOrReturnCtx(e);return h(a,{code:p.invalid_type,expected:g.boolean,received:a.parsedType}),b}return G(e.data)}};Ze.create=t=>new Ze({typeName:m.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...x(t)});var Re=class extends S{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==g.date){let s=this._getOrReturnCtx(e);return h(s,{code:p.invalid_type,expected:g.date,received:s.parsedType}),b}if(isNaN(e.data.getTime())){let s=this._getOrReturnCtx(e);return h(s,{code:p.invalid_date}),b}let a=new L,n;for(let s of this._def.checks)s.kind==="min"?e.data.getTime()<s.value&&(n=this._getOrReturnCtx(e,n),h(n,{code:p.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),a.dirty()):s.kind==="max"?e.data.getTime()>s.value&&(n=this._getOrReturnCtx(e,n),h(n,{code:p.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),a.dirty()):R.assertNever(s);return{status:a.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Re({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:y.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:y.toString(r)})}get minDate(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}};Re.create=t=>new Re({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:m.ZodDate,...x(t)});var ot=class extends S{_parse(e){if(this._getType(e)!==g.symbol){let a=this._getOrReturnCtx(e);return h(a,{code:p.invalid_type,expected:g.symbol,received:a.parsedType}),b}return G(e.data)}};ot.create=t=>new ot({typeName:m.ZodSymbol,...x(t)});var Je=class extends S{_parse(e){if(this._getType(e)!==g.undefined){let a=this._getOrReturnCtx(e);return h(a,{code:p.invalid_type,expected:g.undefined,received:a.parsedType}),b}return G(e.data)}};Je.create=t=>new Je({typeName:m.ZodUndefined,...x(t)});var Be=class extends S{_parse(e){if(this._getType(e)!==g.null){let a=this._getOrReturnCtx(e);return h(a,{code:p.invalid_type,expected:g.null,received:a.parsedType}),b}return G(e.data)}};Be.create=t=>new Be({typeName:m.ZodNull,...x(t)});var De=class extends S{constructor(){super(...arguments),this._any=!0}_parse(e){return G(e.data)}};De.create=t=>new De({typeName:m.ZodAny,...x(t)});var Ce=class extends S{constructor(){super(...arguments),this._unknown=!0}_parse(e){return G(e.data)}};Ce.create=t=>new Ce({typeName:m.ZodUnknown,...x(t)});var pe=class extends S{_parse(e){let r=this._getOrReturnCtx(e);return h(r,{code:p.invalid_type,expected:g.never,received:r.parsedType}),b}};pe.create=t=>new pe({typeName:m.ZodNever,...x(t)});var it=class extends S{_parse(e){if(this._getType(e)!==g.undefined){let a=this._getOrReturnCtx(e);return h(a,{code:p.invalid_type,expected:g.void,received:a.parsedType}),b}return G(e.data)}};it.create=t=>new it({typeName:m.ZodVoid,...x(t)});var te=class extends S{_parse(e){let{ctx:r,status:a}=this._processInputParams(e),n=this._def;if(r.parsedType!==g.array)return h(r,{code:p.invalid_type,expected:g.array,received:r.parsedType}),b;if(n.exactLength!==null){let o=r.data.length>n.exactLength.value,i=r.data.length<n.exactLength.value;(o||i)&&(h(r,{code:o?p.too_big:p.too_small,minimum:i?n.exactLength.value:void 0,maximum:o?n.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:n.exactLength.message}),a.dirty())}if(n.minLength!==null&&r.data.length<n.minLength.value&&(h(r,{code:p.too_small,minimum:n.minLength.value,type:"array",inclusive:!0,exact:!1,message:n.minLength.message}),a.dirty()),n.maxLength!==null&&r.data.length>n.maxLength.value&&(h(r,{code:p.too_big,maximum:n.maxLength.value,type:"array",inclusive:!0,exact:!1,message:n.maxLength.message}),a.dirty()),r.common.async)return Promise.all([...r.data].map((o,i)=>n.type._parseAsync(new oe(r,o,r.path,i)))).then(o=>L.mergeArray(a,o));let s=[...r.data].map((o,i)=>n.type._parseSync(new oe(r,o,r.path,i)));return L.mergeArray(a,s)}get element(){return this._def.type}min(e,r){return new te({...this._def,minLength:{value:e,message:y.toString(r)}})}max(e,r){return new te({...this._def,maxLength:{value:e,message:y.toString(r)}})}length(e,r){return new te({...this._def,exactLength:{value:e,message:y.toString(r)}})}nonempty(e){return this.min(1,e)}};te.create=(t,e)=>new te({type:t,minLength:null,maxLength:null,exactLength:null,typeName:m.ZodArray,...x(e)});function at(t){if(t instanceof O){let e={};for(let r in t.shape){let a=t.shape[r];e[r]=H.create(at(a))}return new O({...t._def,shape:()=>e})}else return t instanceof te?new te({...t._def,type:at(t.element)}):t instanceof H?H.create(at(t.unwrap())):t instanceof xe?xe.create(at(t.unwrap())):t instanceof ie?ie.create(t.items.map(e=>at(e))):t}var O=class extends S{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let e=this._def.shape(),r=R.objectKeys(e);return this._cached={shape:e,keys:r}}_parse(e){if(this._getType(e)!==g.object){let u=this._getOrReturnCtx(e);return h(u,{code:p.invalid_type,expected:g.object,received:u.parsedType}),b}let{status:a,ctx:n}=this._processInputParams(e),{shape:s,keys:o}=this._getCached(),i=[];if(!(this._def.catchall instanceof pe&&this._def.unknownKeys==="strip"))for(let u in n.data)o.includes(u)||i.push(u);let l=[];for(let u of o){let d=s[u],f=n.data[u];l.push({key:{status:"valid",value:u},value:d._parse(new oe(n,f,n.path,u)),alwaysSet:u in n.data})}if(this._def.catchall instanceof pe){let u=this._def.unknownKeys;if(u==="passthrough")for(let d of i)l.push({key:{status:"valid",value:d},value:{status:"valid",value:n.data[d]}});else if(u==="strict")i.length>0&&(h(n,{code:p.unrecognized_keys,keys:i}),a.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let u=this._def.catchall;for(let d of i){let f=n.data[d];l.push({key:{status:"valid",value:d},value:u._parse(new oe(n,f,n.path,d)),alwaysSet:d in n.data})}}return n.common.async?Promise.resolve().then(async()=>{let u=[];for(let d of l){let f=await d.key,w=await d.value;u.push({key:f,value:w,alwaysSet:d.alwaysSet})}return u}).then(u=>L.mergeObjectSync(a,u)):L.mergeObjectSync(a,l)}get shape(){return this._def.shape()}strict(e){return y.errToObj,new O({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(r,a)=>{var n,s,o,i;let l=(o=(s=(n=this._def).errorMap)===null||s===void 0?void 0:s.call(n,r,a).message)!==null&&o!==void 0?o:a.defaultError;return r.code==="unrecognized_keys"?{message:(i=y.errToObj(e).message)!==null&&i!==void 0?i:l}:{message:l}}}:{}})}strip(){return new O({...this._def,unknownKeys:"strip"})}passthrough(){return new O({...this._def,unknownKeys:"passthrough"})}extend(e){return new O({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new O({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:m.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new O({...this._def,catchall:e})}pick(e){let r={};return R.objectKeys(e).forEach(a=>{e[a]&&this.shape[a]&&(r[a]=this.shape[a])}),new O({...this._def,shape:()=>r})}omit(e){let r={};return R.objectKeys(this.shape).forEach(a=>{e[a]||(r[a]=this.shape[a])}),new O({...this._def,shape:()=>r})}deepPartial(){return at(this)}partial(e){let r={};return R.objectKeys(this.shape).forEach(a=>{let n=this.shape[a];e&&!e[a]?r[a]=n:r[a]=n.optional()}),new O({...this._def,shape:()=>r})}required(e){let r={};return R.objectKeys(this.shape).forEach(a=>{if(e&&!e[a])r[a]=this.shape[a];else{let s=this.shape[a];for(;s instanceof H;)s=s._def.innerType;r[a]=s}}),new O({...this._def,shape:()=>r})}keyof(){return xn(R.objectKeys(this.shape))}};O.create=(t,e)=>new O({shape:()=>t,unknownKeys:"strip",catchall:pe.create(),typeName:m.ZodObject,...x(e)});O.strictCreate=(t,e)=>new O({shape:()=>t,unknownKeys:"strict",catchall:pe.create(),typeName:m.ZodObject,...x(e)});O.lazycreate=(t,e)=>new O({shape:t,unknownKeys:"strip",catchall:pe.create(),typeName:m.ZodObject,...x(e)});var ze=class extends S{_parse(e){let{ctx:r}=this._processInputParams(e),a=this._def.options;function n(s){for(let i of s)if(i.result.status==="valid")return i.result;for(let i of s)if(i.result.status==="dirty")return r.common.issues.push(...i.ctx.common.issues),i.result;let o=s.map(i=>new z(i.ctx.common.issues));return h(r,{code:p.invalid_union,unionErrors:o}),b}if(r.common.async)return Promise.all(a.map(async s=>{let o={...r,common:{...r.common,issues:[]},parent:null};return{result:await s._parseAsync({data:r.data,path:r.path,parent:o}),ctx:o}})).then(n);{let s,o=[];for(let l of a){let u={...r,common:{...r.common,issues:[]},parent:null},d=l._parseSync({data:r.data,path:r.path,parent:u});if(d.status==="valid")return d;d.status==="dirty"&&!s&&(s={result:d,ctx:u}),u.common.issues.length&&o.push(u.common.issues)}if(s)return r.common.issues.push(...s.ctx.common.issues),s.result;let i=o.map(l=>new z(l));return h(r,{code:p.invalid_union,unionErrors:i}),b}}get options(){return this._def.options}};ze.create=(t,e)=>new ze({options:t,typeName:m.ZodUnion,...x(e)});var ke=t=>t instanceof We?ke(t.schema):t instanceof re?ke(t.innerType()):t instanceof He?[t.value]:t instanceof we?t.options:t instanceof Ye?R.objectValues(t.enum):t instanceof Xe?ke(t._def.innerType):t instanceof Je?[void 0]:t instanceof Be?[null]:t instanceof H?[void 0,...ke(t.unwrap())]:t instanceof xe?[null,...ke(t.unwrap())]:t instanceof Ot||t instanceof tt?ke(t.unwrap()):t instanceof Qe?ke(t._def.innerType):[],lt=class extends S{_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==g.object)return h(r,{code:p.invalid_type,expected:g.object,received:r.parsedType}),b;let a=this.discriminator,n=r.data[a],s=this.optionsMap.get(n);return s?r.common.async?s._parseAsync({data:r.data,path:r.path,parent:r}):s._parseSync({data:r.data,path:r.path,parent:r}):(h(r,{code:p.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[a]}),b)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,r,a){let n=new Map;for(let s of r){let o=ke(s.shape[e]);if(!o.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let i of o){if(n.has(i))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(i)}`);n.set(i,s)}}return new lt({typeName:m.ZodDiscriminatedUnion,discriminator:e,options:r,optionsMap:n,...x(a)})}};function Dr(t,e){let r=Ae(t),a=Ae(e);if(t===e)return{valid:!0,data:t};if(r===g.object&&a===g.object){let n=R.objectKeys(e),s=R.objectKeys(t).filter(i=>n.indexOf(i)!==-1),o={...t,...e};for(let i of s){let l=Dr(t[i],e[i]);if(!l.valid)return{valid:!1};o[i]=l.data}return{valid:!0,data:o}}else if(r===g.array&&a===g.array){if(t.length!==e.length)return{valid:!1};let n=[];for(let s=0;s<t.length;s++){let o=t[s],i=e[s],l=Dr(o,i);if(!l.valid)return{valid:!1};n.push(l.data)}return{valid:!0,data:n}}else return r===g.date&&a===g.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}var Ge=class extends S{_parse(e){let{status:r,ctx:a}=this._processInputParams(e),n=(s,o)=>{if(Or(s)||Or(o))return b;let i=Dr(s.value,o.value);return i.valid?((Mr(s)||Mr(o))&&r.dirty(),{status:r.value,value:i.data}):(h(a,{code:p.invalid_intersection_types}),b)};return a.common.async?Promise.all([this._def.left._parseAsync({data:a.data,path:a.path,parent:a}),this._def.right._parseAsync({data:a.data,path:a.path,parent:a})]).then(([s,o])=>n(s,o)):n(this._def.left._parseSync({data:a.data,path:a.path,parent:a}),this._def.right._parseSync({data:a.data,path:a.path,parent:a}))}};Ge.create=(t,e,r)=>new Ge({left:t,right:e,typeName:m.ZodIntersection,...x(r)});var ie=class extends S{_parse(e){let{status:r,ctx:a}=this._processInputParams(e);if(a.parsedType!==g.array)return h(a,{code:p.invalid_type,expected:g.array,received:a.parsedType}),b;if(a.data.length<this._def.items.length)return h(a,{code:p.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),b;!this._def.rest&&a.data.length>this._def.items.length&&(h(a,{code:p.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());let s=[...a.data].map((o,i)=>{let l=this._def.items[i]||this._def.rest;return l?l._parse(new oe(a,o,a.path,i)):null}).filter(o=>!!o);return a.common.async?Promise.all(s).then(o=>L.mergeArray(r,o)):L.mergeArray(r,s)}get items(){return this._def.items}rest(e){return new ie({...this._def,rest:e})}};ie.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ie({items:t,typeName:m.ZodTuple,rest:null,...x(e)})};var Ke=class extends S{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:a}=this._processInputParams(e);if(a.parsedType!==g.object)return h(a,{code:p.invalid_type,expected:g.object,received:a.parsedType}),b;let n=[],s=this._def.keyType,o=this._def.valueType;for(let i in a.data)n.push({key:s._parse(new oe(a,i,a.path,i)),value:o._parse(new oe(a,a.data[i],a.path,i)),alwaysSet:i in a.data});return a.common.async?L.mergeObjectAsync(r,n):L.mergeObjectSync(r,n)}get element(){return this._def.valueType}static create(e,r,a){return r instanceof S?new Ke({keyType:e,valueType:r,typeName:m.ZodRecord,...x(a)}):new Ke({keyType:ee.create(),valueType:e,typeName:m.ZodRecord,...x(r)})}},ut=class extends S{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:a}=this._processInputParams(e);if(a.parsedType!==g.map)return h(a,{code:p.invalid_type,expected:g.map,received:a.parsedType}),b;let n=this._def.keyType,s=this._def.valueType,o=[...a.data.entries()].map(([i,l],u)=>({key:n._parse(new oe(a,i,a.path,[u,"key"])),value:s._parse(new oe(a,l,a.path,[u,"value"]))}));if(a.common.async){let i=new Map;return Promise.resolve().then(async()=>{for(let l of o){let u=await l.key,d=await l.value;if(u.status==="aborted"||d.status==="aborted")return b;(u.status==="dirty"||d.status==="dirty")&&r.dirty(),i.set(u.value,d.value)}return{status:r.value,value:i}})}else{let i=new Map;for(let l of o){let u=l.key,d=l.value;if(u.status==="aborted"||d.status==="aborted")return b;(u.status==="dirty"||d.status==="dirty")&&r.dirty(),i.set(u.value,d.value)}return{status:r.value,value:i}}}};ut.create=(t,e,r)=>new ut({valueType:e,keyType:t,typeName:m.ZodMap,...x(r)});var Ne=class extends S{_parse(e){let{status:r,ctx:a}=this._processInputParams(e);if(a.parsedType!==g.set)return h(a,{code:p.invalid_type,expected:g.set,received:a.parsedType}),b;let n=this._def;n.minSize!==null&&a.data.size<n.minSize.value&&(h(a,{code:p.too_small,minimum:n.minSize.value,type:"set",inclusive:!0,exact:!1,message:n.minSize.message}),r.dirty()),n.maxSize!==null&&a.data.size>n.maxSize.value&&(h(a,{code:p.too_big,maximum:n.maxSize.value,type:"set",inclusive:!0,exact:!1,message:n.maxSize.message}),r.dirty());let s=this._def.valueType;function o(l){let u=new Set;for(let d of l){if(d.status==="aborted")return b;d.status==="dirty"&&r.dirty(),u.add(d.value)}return{status:r.value,value:u}}let i=[...a.data.values()].map((l,u)=>s._parse(new oe(a,l,a.path,u)));return a.common.async?Promise.all(i).then(l=>o(l)):o(i)}min(e,r){return new Ne({...this._def,minSize:{value:e,message:y.toString(r)}})}max(e,r){return new Ne({...this._def,maxSize:{value:e,message:y.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}};Ne.create=(t,e)=>new Ne({valueType:t,minSize:null,maxSize:null,typeName:m.ZodSet,...x(e)});var Me=class extends S{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==g.function)return h(r,{code:p.invalid_type,expected:g.function,received:r.parsedType}),b;function a(i,l){return nr({data:i,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,ar(),st].filter(u=>!!u),issueData:{code:p.invalid_arguments,argumentsError:l}})}function n(i,l){return nr({data:i,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,ar(),st].filter(u=>!!u),issueData:{code:p.invalid_return_type,returnTypeError:l}})}let s={errorMap:r.common.contextualErrorMap},o=r.data;if(this._def.returns instanceof je){let i=this;return G(async function(...l){let u=new z([]),d=await i._def.args.parseAsync(l,s).catch(A=>{throw u.addIssue(a(l,A)),u}),f=await Reflect.apply(o,this,d);return await i._def.returns._def.type.parseAsync(f,s).catch(A=>{throw u.addIssue(n(f,A)),u})})}else{let i=this;return G(function(...l){let u=i._def.args.safeParse(l,s);if(!u.success)throw new z([a(l,u.error)]);let d=Reflect.apply(o,this,u.data),f=i._def.returns.safeParse(d,s);if(!f.success)throw new z([n(d,f.error)]);return f.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new Me({...this._def,args:ie.create(e).rest(Ce.create())})}returns(e){return new Me({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,r,a){return new Me({args:e||ie.create([]).rest(Ce.create()),returns:r||Ce.create(),typeName:m.ZodFunction,...x(a)})}},We=class extends S{get schema(){return this._def.getter()}_parse(e){let{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}};We.create=(t,e)=>new We({getter:t,typeName:m.ZodLazy,...x(e)});var He=class extends S{_parse(e){if(e.data!==this._def.value){let r=this._getOrReturnCtx(e);return h(r,{received:r.data,code:p.invalid_literal,expected:this._def.value}),b}return{status:"valid",value:e.data}}get value(){return this._def.value}};He.create=(t,e)=>new He({value:t,typeName:m.ZodLiteral,...x(e)});function xn(t,e){return new we({values:t,typeName:m.ZodEnum,...x(e)})}var we=class extends S{constructor(){super(...arguments),Rt.set(this,void 0)}_parse(e){if(typeof e.data!="string"){let r=this._getOrReturnCtx(e),a=this._def.values;return h(r,{expected:R.joinValues(a),received:r.parsedType,code:p.invalid_type}),b}if(sr(this,Rt,"f")||vn(this,Rt,new Set(this._def.values),"f"),!sr(this,Rt,"f").has(e.data)){let r=this._getOrReturnCtx(e),a=this._def.values;return h(r,{received:r.data,code:p.invalid_enum_value,options:a}),b}return G(e.data)}get options(){return this._def.values}get enum(){let e={};for(let r of this._def.values)e[r]=r;return e}get Values(){let e={};for(let r of this._def.values)e[r]=r;return e}get Enum(){let e={};for(let r of this._def.values)e[r]=r;return e}extract(e,r=this._def){return we.create(e,{...this._def,...r})}exclude(e,r=this._def){return we.create(this.options.filter(a=>!e.includes(a)),{...this._def,...r})}};Rt=new WeakMap;we.create=xn;var Ye=class extends S{constructor(){super(...arguments),Nt.set(this,void 0)}_parse(e){let r=R.getValidEnumValues(this._def.values),a=this._getOrReturnCtx(e);if(a.parsedType!==g.string&&a.parsedType!==g.number){let n=R.objectValues(r);return h(a,{expected:R.joinValues(n),received:a.parsedType,code:p.invalid_type}),b}if(sr(this,Nt,"f")||vn(this,Nt,new Set(R.getValidEnumValues(this._def.values)),"f"),!sr(this,Nt,"f").has(e.data)){let n=R.objectValues(r);return h(a,{received:a.data,code:p.invalid_enum_value,options:n}),b}return G(e.data)}get enum(){return this._def.values}};Nt=new WeakMap;Ye.create=(t,e)=>new Ye({values:t,typeName:m.ZodNativeEnum,...x(e)});var je=class extends S{unwrap(){return this._def.type}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==g.promise&&r.common.async===!1)return h(r,{code:p.invalid_type,expected:g.promise,received:r.parsedType}),b;let a=r.parsedType===g.promise?r.data:Promise.resolve(r.data);return G(a.then(n=>this._def.type.parseAsync(n,{path:r.path,errorMap:r.common.contextualErrorMap})))}};je.create=(t,e)=>new je({type:t,typeName:m.ZodPromise,...x(e)});var re=class extends S{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===m.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:r,ctx:a}=this._processInputParams(e),n=this._def.effect||null,s={addIssue:o=>{h(a,o),o.fatal?r.abort():r.dirty()},get path(){return a.path}};if(s.addIssue=s.addIssue.bind(s),n.type==="preprocess"){let o=n.transform(a.data,s);if(a.common.async)return Promise.resolve(o).then(async i=>{if(r.value==="aborted")return b;let l=await this._def.schema._parseAsync({data:i,path:a.path,parent:a});return l.status==="aborted"?b:l.status==="dirty"||r.value==="dirty"?nt(l.value):l});{if(r.value==="aborted")return b;let i=this._def.schema._parseSync({data:o,path:a.path,parent:a});return i.status==="aborted"?b:i.status==="dirty"||r.value==="dirty"?nt(i.value):i}}if(n.type==="refinement"){let o=i=>{let l=n.refinement(i,s);if(a.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return i};if(a.common.async===!1){let i=this._def.schema._parseSync({data:a.data,path:a.path,parent:a});return i.status==="aborted"?b:(i.status==="dirty"&&r.dirty(),o(i.value),{status:r.value,value:i.value})}else return this._def.schema._parseAsync({data:a.data,path:a.path,parent:a}).then(i=>i.status==="aborted"?b:(i.status==="dirty"&&r.dirty(),o(i.value).then(()=>({status:r.value,value:i.value}))))}if(n.type==="transform")if(a.common.async===!1){let o=this._def.schema._parseSync({data:a.data,path:a.path,parent:a});if(!Ve(o))return o;let i=n.transform(o.value,s);if(i instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:i}}else return this._def.schema._parseAsync({data:a.data,path:a.path,parent:a}).then(o=>Ve(o)?Promise.resolve(n.transform(o.value,s)).then(i=>({status:r.value,value:i})):o);R.assertNever(n)}};re.create=(t,e,r)=>new re({schema:t,typeName:m.ZodEffects,effect:e,...x(r)});re.createWithPreprocess=(t,e,r)=>new re({schema:e,effect:{type:"preprocess",transform:t},typeName:m.ZodEffects,...x(r)});var H=class extends S{_parse(e){return this._getType(e)===g.undefined?G(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};H.create=(t,e)=>new H({innerType:t,typeName:m.ZodOptional,...x(e)});var xe=class extends S{_parse(e){return this._getType(e)===g.null?G(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};xe.create=(t,e)=>new xe({innerType:t,typeName:m.ZodNullable,...x(e)});var Xe=class extends S{_parse(e){let{ctx:r}=this._processInputParams(e),a=r.data;return r.parsedType===g.undefined&&(a=this._def.defaultValue()),this._def.innerType._parse({data:a,path:r.path,parent:r})}removeDefault(){return this._def.innerType}};Xe.create=(t,e)=>new Xe({innerType:t,typeName:m.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...x(e)});var Qe=class extends S{_parse(e){let{ctx:r}=this._processInputParams(e),a={...r,common:{...r.common,issues:[]}},n=this._def.innerType._parse({data:a.data,path:a.path,parent:{...a}});return Pt(n)?n.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new z(a.common.issues)},input:a.data})})):{status:"valid",value:n.status==="valid"?n.value:this._def.catchValue({get error(){return new z(a.common.issues)},input:a.data})}}removeCatch(){return this._def.innerType}};Qe.create=(t,e)=>new Qe({innerType:t,typeName:m.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...x(e)});var ct=class extends S{_parse(e){if(this._getType(e)!==g.nan){let a=this._getOrReturnCtx(e);return h(a,{code:p.invalid_type,expected:g.nan,received:a.parsedType}),b}return{status:"valid",value:e.data}}};ct.create=t=>new ct({typeName:m.ZodNaN,...x(t)});var Ti=Symbol("zod_brand"),Ot=class extends S{_parse(e){let{ctx:r}=this._processInputParams(e),a=r.data;return this._def.type._parse({data:a,path:r.path,parent:r})}unwrap(){return this._def.type}},et=class extends S{_parse(e){let{status:r,ctx:a}=this._processInputParams(e);if(a.common.async)return(async()=>{let s=await this._def.in._parseAsync({data:a.data,path:a.path,parent:a});return s.status==="aborted"?b:s.status==="dirty"?(r.dirty(),nt(s.value)):this._def.out._parseAsync({data:s.value,path:a.path,parent:a})})();{let n=this._def.in._parseSync({data:a.data,path:a.path,parent:a});return n.status==="aborted"?b:n.status==="dirty"?(r.dirty(),{status:"dirty",value:n.value}):this._def.out._parseSync({data:n.value,path:a.path,parent:a})}}static create(e,r){return new et({in:e,out:r,typeName:m.ZodPipeline})}},tt=class extends S{_parse(e){let r=this._def.innerType._parse(e),a=n=>(Ve(n)&&(n.value=Object.freeze(n.value)),n);return Pt(r)?r.then(n=>a(n)):a(r)}unwrap(){return this._def.innerType}};tt.create=(t,e)=>new tt({innerType:t,typeName:m.ZodReadonly,...x(e)});function hn(t,e){let r=typeof t=="function"?t(e):typeof t=="string"?{message:t}:t;return typeof r=="string"?{message:r}:r}function Sn(t,e={},r){return t?De.create().superRefine((a,n)=>{var s,o;let i=t(a);if(i instanceof Promise)return i.then(l=>{var u,d;if(!l){let f=hn(e,a),w=(d=(u=f.fatal)!==null&&u!==void 0?u:r)!==null&&d!==void 0?d:!0;n.addIssue({code:"custom",...f,fatal:w})}});if(!i){let l=hn(e,a),u=(o=(s=l.fatal)!==null&&s!==void 0?s:r)!==null&&o!==void 0?o:!0;n.addIssue({code:"custom",...l,fatal:u})}}):De.create()}var Ii={object:O.lazycreate},m;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(m||(m={}));var Ei=(t,e={message:`Input not instance of ${t.name}`})=>Sn(r=>r instanceof t,e),Tn=ee.create,In=_e.create,ki=ct.create,Ai=be.create,En=Ze.create,Ci=Re.create,Ri=ot.create,Ni=Je.create,Pi=Be.create,Oi=De.create,Mi=Ce.create,Di=pe.create,ji=it.create,$i=te.create,qi=O.create,Ui=O.strictCreate,Li=ze.create,Fi=lt.create,Vi=Ge.create,Zi=ie.create,Ji=Ke.create,Bi=ut.create,zi=Ne.create,Gi=Me.create,Ki=We.create,Wi=He.create,Hi=we.create,Yi=Ye.create,Xi=je.create,gn=re.create,Qi=H.create,el=xe.create,tl=re.createWithPreprocess,rl=et.create,al=()=>Tn().optional(),nl=()=>In().optional(),sl=()=>En().optional(),ol={string:t=>ee.create({...t,coerce:!0}),number:t=>_e.create({...t,coerce:!0}),boolean:t=>Ze.create({...t,coerce:!0}),bigint:t=>be.create({...t,coerce:!0}),date:t=>Re.create({...t,coerce:!0})},il=b,c=Object.freeze({__proto__:null,defaultErrorMap:st,setErrorMap:ti,getErrorMap:ar,makeIssue:nr,EMPTY_PATH:ri,addIssueToContext:h,ParseStatus:L,INVALID:b,DIRTY:nt,OK:G,isAborted:Or,isDirty:Mr,isValid:Ve,isAsync:Pt,get util(){return R},get objectUtil(){return Pr},ZodParsedType:g,getParsedType:Ae,ZodType:S,datetimeRegex:wn,ZodString:ee,ZodNumber:_e,ZodBigInt:be,ZodBoolean:Ze,ZodDate:Re,ZodSymbol:ot,ZodUndefined:Je,ZodNull:Be,ZodAny:De,ZodUnknown:Ce,ZodNever:pe,ZodVoid:it,ZodArray:te,ZodObject:O,ZodUnion:ze,ZodDiscriminatedUnion:lt,ZodIntersection:Ge,ZodTuple:ie,ZodRecord:Ke,ZodMap:ut,ZodSet:Ne,ZodFunction:Me,ZodLazy:We,ZodLiteral:He,ZodEnum:we,ZodNativeEnum:Ye,ZodPromise:je,ZodEffects:re,ZodTransformer:re,ZodOptional:H,ZodNullable:xe,ZodDefault:Xe,ZodCatch:Qe,ZodNaN:ct,BRAND:Ti,ZodBranded:Ot,ZodPipeline:et,ZodReadonly:tt,custom:Sn,Schema:S,ZodSchema:S,late:Ii,get ZodFirstPartyTypeKind(){return m},coerce:ol,any:Oi,array:$i,bigint:Ai,boolean:En,date:Ci,discriminatedUnion:Fi,effect:gn,enum:Hi,function:Gi,instanceof:Ei,intersection:Vi,lazy:Ki,literal:Wi,map:Bi,nan:ki,nativeEnum:Yi,never:Di,null:Pi,nullable:el,number:In,object:qi,oboolean:sl,onumber:nl,optional:Qi,ostring:al,pipeline:rl,preprocess:tl,promise:Xi,record:Ji,set:zi,strictObject:Ui,string:Tn,symbol:Ri,transformer:gn,tuple:Zi,undefined:Ni,union:Li,unknown:Mi,void:ji,NEVER:il,ZodIssueCode:p,quotelessJson:ei,ZodError:z});function kn(){return{}}function An(t,e){var a,n,s;let r={type:"array"};return(a=t.type)!=null&&a._def&&((s=(n=t.type)==null?void 0:n._def)==null?void 0:s.typeName)!==m.ZodAny&&(r.items=_(t.type._def,{...e,currentPath:[...e.currentPath,"items"]})),t.minLength&&C(r,"minItems",t.minLength.value,t.minLength.message,e),t.maxLength&&C(r,"maxItems",t.maxLength.value,t.maxLength.message,e),t.exactLength&&(C(r,"minItems",t.exactLength.value,t.exactLength.message,e),C(r,"maxItems",t.exactLength.value,t.exactLength.message,e)),r}function Cn(t,e){let r={type:"integer",format:"int64"};if(!t.checks)return r;for(let a of t.checks)switch(a.kind){case"min":e.target==="jsonSchema7"?a.inclusive?C(r,"minimum",a.value,a.message,e):C(r,"exclusiveMinimum",a.value,a.message,e):(a.inclusive||(r.exclusiveMinimum=!0),C(r,"minimum",a.value,a.message,e));break;case"max":e.target==="jsonSchema7"?a.inclusive?C(r,"maximum",a.value,a.message,e):C(r,"exclusiveMaximum",a.value,a.message,e):(a.inclusive||(r.exclusiveMaximum=!0),C(r,"maximum",a.value,a.message,e));break;case"multipleOf":C(r,"multipleOf",a.value,a.message,e);break}return r}function Rn(){return{type:"boolean"}}function or(t,e){return _(t.type._def,e)}var Nn=(t,e)=>_(t.innerType._def,e);function jr(t,e,r){let a=r!=null?r:e.dateStrategy;if(Array.isArray(a))return{anyOf:a.map((n,s)=>jr(t,e,n))};switch(a){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return ll(t,e)}}var ll=(t,e)=>{let r={type:"integer",format:"unix-time"};if(e.target==="openApi3")return r;for(let a of t.checks)switch(a.kind){case"min":C(r,"minimum",a.value,a.message,e);break;case"max":C(r,"maximum",a.value,a.message,e);break}return r};function Pn(t,e){return{..._(t.innerType._def,e),default:t.defaultValue()}}function On(t,e){return e.effectStrategy==="input"?_(t.schema._def,e):{}}function Mn(t){return{type:"string",enum:Array.from(t.values)}}var ul=t=>"type"in t&&t.type==="string"?!1:"allOf"in t;function Dn(t,e){let r=[_(t.left._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),_(t.right._def,{...e,currentPath:[...e.currentPath,"allOf","1"]})].filter(s=>!!s),a=e.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0,n=[];return r.forEach(s=>{if(ul(s))n.push(...s.allOf),s.unevaluatedProperties===void 0&&(a=void 0);else{let o=s;if("additionalProperties"in s&&s.additionalProperties===!1){let{additionalProperties:i,...l}=s;o=l}else a=void 0;n.push(o)}}),n.length?{allOf:n,...a}:void 0}function jn(t,e){let r=typeof t.value;return r!=="bigint"&&r!=="number"&&r!=="boolean"&&r!=="string"?{type:Array.isArray(t.value)?"array":"object"}:e.target==="openApi3"?{type:r==="bigint"?"integer":r,enum:[t.value]}:{type:r==="bigint"?"integer":r,const:t.value}}var $r,me={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>($r===void 0&&($r=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),$r),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function ir(t,e){let r={type:"string"};if(t.checks)for(let a of t.checks)switch(a.kind){case"min":C(r,"minLength",typeof r.minLength=="number"?Math.max(r.minLength,a.value):a.value,a.message,e);break;case"max":C(r,"maxLength",typeof r.maxLength=="number"?Math.min(r.maxLength,a.value):a.value,a.message,e);break;case"email":switch(e.emailStrategy){case"format:email":fe(r,"email",a.message,e);break;case"format:idn-email":fe(r,"idn-email",a.message,e);break;case"pattern:zod":K(r,me.email,a.message,e);break}break;case"url":fe(r,"uri",a.message,e);break;case"uuid":fe(r,"uuid",a.message,e);break;case"regex":K(r,a.regex,a.message,e);break;case"cuid":K(r,me.cuid,a.message,e);break;case"cuid2":K(r,me.cuid2,a.message,e);break;case"startsWith":K(r,RegExp(`^${qr(a.value,e)}`),a.message,e);break;case"endsWith":K(r,RegExp(`${qr(a.value,e)}$`),a.message,e);break;case"datetime":fe(r,"date-time",a.message,e);break;case"date":fe(r,"date",a.message,e);break;case"time":fe(r,"time",a.message,e);break;case"duration":fe(r,"duration",a.message,e);break;case"length":C(r,"minLength",typeof r.minLength=="number"?Math.max(r.minLength,a.value):a.value,a.message,e),C(r,"maxLength",typeof r.maxLength=="number"?Math.min(r.maxLength,a.value):a.value,a.message,e);break;case"includes":{K(r,RegExp(qr(a.value,e)),a.message,e);break}case"ip":{a.version!=="v6"&&fe(r,"ipv4",a.message,e),a.version!=="v4"&&fe(r,"ipv6",a.message,e);break}case"base64url":K(r,me.base64url,a.message,e);break;case"jwt":K(r,me.jwt,a.message,e);break;case"cidr":{a.version!=="v6"&&K(r,me.ipv4Cidr,a.message,e),a.version!=="v4"&&K(r,me.ipv6Cidr,a.message,e);break}case"emoji":K(r,me.emoji(),a.message,e);break;case"ulid":{K(r,me.ulid,a.message,e);break}case"base64":{switch(e.base64Strategy){case"format:binary":{fe(r,"binary",a.message,e);break}case"contentEncoding:base64":{C(r,"contentEncoding","base64",a.message,e);break}case"pattern:zod":{K(r,me.base64,a.message,e);break}}break}case"nanoid":K(r,me.nanoid,a.message,e);case"toLowerCase":case"toUpperCase":case"trim":break;default:(n=>{})(a)}return r}function qr(t,e){return e.patternStrategy==="escape"?dl(t):t}var cl=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function dl(t){let e="";for(let r=0;r<t.length;r++)cl.has(t[r])||(e+="\\"),e+=t[r];return e}function fe(t,e,r,a){var n;t.format||(n=t.anyOf)!=null&&n.some(s=>s.format)?(t.anyOf||(t.anyOf=[]),t.format&&(t.anyOf.push({format:t.format,...t.errorMessage&&a.errorMessages&&{errorMessage:{format:t.errorMessage.format}}}),delete t.format,t.errorMessage&&(delete t.errorMessage.format,Object.keys(t.errorMessage).length===0&&delete t.errorMessage)),t.anyOf.push({format:e,...r&&a.errorMessages&&{errorMessage:{format:r}}})):C(t,"format",e,r,a)}function K(t,e,r,a){var n;t.pattern||(n=t.allOf)!=null&&n.some(s=>s.pattern)?(t.allOf||(t.allOf=[]),t.pattern&&(t.allOf.push({pattern:t.pattern,...t.errorMessage&&a.errorMessages&&{errorMessage:{pattern:t.errorMessage.pattern}}}),delete t.pattern,t.errorMessage&&(delete t.errorMessage.pattern,Object.keys(t.errorMessage).length===0&&delete t.errorMessage)),t.allOf.push({pattern:$n(e,a),...r&&a.errorMessages&&{errorMessage:{pattern:r}}})):C(t,"pattern",$n(e,a),r,a)}function $n(t,e){var l;if(!e.applyRegexFlags||!t.flags)return t.source;let r={i:t.flags.includes("i"),m:t.flags.includes("m"),s:t.flags.includes("s")},a=r.i?t.source.toLowerCase():t.source,n="",s=!1,o=!1,i=!1;for(let u=0;u<a.length;u++){if(s){n+=a[u],s=!1;continue}if(r.i){if(o){if(a[u].match(/[a-z]/)){i?(n+=a[u],n+=`${a[u-2]}-${a[u]}`.toUpperCase(),i=!1):a[u+1]==="-"&&((l=a[u+2])!=null&&l.match(/[a-z]/))?(n+=a[u],i=!0):n+=`${a[u]}${a[u].toUpperCase()}`;continue}}else if(a[u].match(/[a-z]/)){n+=`[${a[u]}${a[u].toUpperCase()}]`;continue}}if(r.m){if(a[u]==="^"){n+=`(^|(?<=[\r
]))`;continue}else if(a[u]==="$"){n+=`($|(?=[\r
]))`;continue}}if(r.s&&a[u]==="."){n+=o?`${a[u]}\r
`:`[${a[u]}\r
]`;continue}n+=a[u],a[u]==="\\"?s=!0:o&&a[u]==="]"?o=!1:!o&&a[u]==="["&&(o=!0)}try{new RegExp(n)}catch(u){return console.warn(`Could not convert regex pattern at ${e.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),t.source}return n}function lr(t,e){var a,n,s,o,i,l,u;if(e.target==="openAi"&&console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead."),e.target==="openApi3"&&((a=t.keyType)==null?void 0:a._def.typeName)===m.ZodEnum)return{type:"object",required:t.keyType._def.values,properties:t.keyType._def.values.reduce((d,f)=>{var w;return{...d,[f]:(w=_(t.valueType._def,{...e,currentPath:[...e.currentPath,"properties",f]}))!=null?w:{}}},{}),additionalProperties:!1};let r={type:"object",additionalProperties:(n=_(t.valueType._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]}))!=null?n:{}};if(e.target==="openApi3")return r;if(((s=t.keyType)==null?void 0:s._def.typeName)===m.ZodString&&((o=t.keyType._def.checks)!=null&&o.length)){let{type:d,...f}=ir(t.keyType._def,e);return{...r,propertyNames:f}}else{if(((i=t.keyType)==null?void 0:i._def.typeName)===m.ZodEnum)return{...r,propertyNames:{enum:t.keyType._def.values}};if(((l=t.keyType)==null?void 0:l._def.typeName)===m.ZodBranded&&t.keyType._def.type._def.typeName===m.ZodString&&((u=t.keyType._def.type._def.checks)!=null&&u.length)){let{type:d,...f}=or(t.keyType._def,e);return{...r,propertyNames:f}}}return r}function qn(t,e){if(e.mapStrategy==="record")return lr(t,e);let r=_(t.keyType._def,{...e,currentPath:[...e.currentPath,"items","items","0"]})||{},a=_(t.valueType._def,{...e,currentPath:[...e.currentPath,"items","items","1"]})||{};return{type:"array",maxItems:125,items:{type:"array",items:[r,a],minItems:2,maxItems:2}}}function Un(t){let e=t.values,a=Object.keys(t.values).filter(s=>typeof e[e[s]]!="number").map(s=>e[s]),n=Array.from(new Set(a.map(s=>typeof s)));return{type:n.length===1?n[0]==="string"?"string":"number":["string","number"],enum:a}}function Ln(){return{not:{}}}function Fn(t){return t.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}var Mt={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function Zn(t,e){if(e.target==="openApi3")return Vn(t,e);let r=t.options instanceof Map?Array.from(t.options.values()):t.options;if(r.every(a=>a._def.typeName in Mt&&(!a._def.checks||!a._def.checks.length))){let a=r.reduce((n,s)=>{let o=Mt[s._def.typeName];return o&&!n.includes(o)?[...n,o]:n},[]);return{type:a.length>1?a:a[0]}}else if(r.every(a=>a._def.typeName==="ZodLiteral"&&!a.description)){let a=r.reduce((n,s)=>{let o=typeof s._def.value;switch(o){case"string":case"number":case"boolean":return[...n,o];case"bigint":return[...n,"integer"];case"object":if(s._def.value===null)return[...n,"null"];case"symbol":case"undefined":case"function":default:return n}},[]);if(a.length===r.length){let n=a.filter((s,o,i)=>i.indexOf(s)===o);return{type:n.length>1?n:n[0],enum:r.reduce((s,o)=>s.includes(o._def.value)?s:[...s,o._def.value],[])}}}else if(r.every(a=>a._def.typeName==="ZodEnum"))return{type:"string",enum:r.reduce((a,n)=>[...a,...n._def.values.filter(s=>!a.includes(s))],[])};return Vn(t,e)}var Vn=(t,e)=>{let r=(t.options instanceof Map?Array.from(t.options.values()):t.options).map((a,n)=>_(a._def,{...e,currentPath:[...e.currentPath,"anyOf",`${n}`]})).filter(a=>!!a&&(!e.strictUnions||typeof a=="object"&&Object.keys(a).length>0));return r.length?{anyOf:r}:void 0};function Jn(t,e){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(t.innerType._def.typeName)&&(!t.innerType._def.checks||!t.innerType._def.checks.length))return e.target==="openApi3"?{type:Mt[t.innerType._def.typeName],nullable:!0}:{type:[Mt[t.innerType._def.typeName],"null"]};if(e.target==="openApi3"){let a=_(t.innerType._def,{...e,currentPath:[...e.currentPath]});return a&&"$ref"in a?{allOf:[a],nullable:!0}:a&&{...a,nullable:!0}}let r=_(t.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","0"]});return r&&{anyOf:[r,{type:"null"}]}}function Bn(t,e){let r={type:"number"};if(!t.checks)return r;for(let a of t.checks)switch(a.kind){case"int":r.type="integer",Rr(r,"type",a.message,e);break;case"min":e.target==="jsonSchema7"?a.inclusive?C(r,"minimum",a.value,a.message,e):C(r,"exclusiveMinimum",a.value,a.message,e):(a.inclusive||(r.exclusiveMinimum=!0),C(r,"minimum",a.value,a.message,e));break;case"max":e.target==="jsonSchema7"?a.inclusive?C(r,"maximum",a.value,a.message,e):C(r,"exclusiveMaximum",a.value,a.message,e):(a.inclusive||(r.exclusiveMaximum=!0),C(r,"maximum",a.value,a.message,e));break;case"multipleOf":C(r,"multipleOf",a.value,a.message,e);break}return r}function pl(t,e){var r,a;return e.removeAdditionalStrategy==="strict"?t.catchall._def.typeName==="ZodNever"?t.unknownKeys!=="strict":(r=_(t.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]}))!=null?r:!0:t.catchall._def.typeName==="ZodNever"?t.unknownKeys==="passthrough":(a=_(t.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]}))!=null?a:!0}function zn(t,e){let r=e.target==="openAi",a={type:"object",...Object.entries(t.shape()).reduce((n,[s,o])=>{if(o===void 0||o._def===void 0)return n;let i=o.isOptional();i&&r&&(o instanceof H&&(o=o._def.innerType),o.isNullable()||(o=o.nullable()),i=!1);let l=_(o._def,{...e,currentPath:[...e.currentPath,"properties",s],propertyPath:[...e.currentPath,"properties",s]});return l===void 0?n:{properties:{...n.properties,[s]:l},required:i?n.required:[...n.required,s]}},{properties:{},required:[]}),additionalProperties:pl(t,e)};return a.required.length||delete a.required,a}var Gn=(t,e)=>{var a;if(e.currentPath.toString()===((a=e.propertyPath)==null?void 0:a.toString()))return _(t.innerType._def,e);let r=_(t.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","1"]});return r?{anyOf:[{not:{}},r]}:{}};var Kn=(t,e)=>{if(e.pipeStrategy==="input")return _(t.in._def,e);if(e.pipeStrategy==="output")return _(t.out._def,e);let r=_(t.in._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),a=_(t.out._def,{...e,currentPath:[...e.currentPath,"allOf",r?"1":"0"]});return{allOf:[r,a].filter(n=>n!==void 0)}};function Wn(t,e){return _(t.type._def,e)}function Hn(t,e){let a={type:"array",uniqueItems:!0,items:_(t.valueType._def,{...e,currentPath:[...e.currentPath,"items"]})};return t.minSize&&C(a,"minItems",t.minSize.value,t.minSize.message,e),t.maxSize&&C(a,"maxItems",t.maxSize.value,t.maxSize.message,e),a}function Yn(t,e){return t.rest?{type:"array",minItems:t.items.length,items:t.items.map((r,a)=>_(r._def,{...e,currentPath:[...e.currentPath,"items",`${a}`]})).reduce((r,a)=>a===void 0?r:[...r,a],[]),additionalItems:_(t.rest._def,{...e,currentPath:[...e.currentPath,"additionalItems"]})}:{type:"array",minItems:t.items.length,maxItems:t.items.length,items:t.items.map((r,a)=>_(r._def,{...e,currentPath:[...e.currentPath,"items",`${a}`]})).reduce((r,a)=>a===void 0?r:[...r,a],[])}}function Xn(){return{not:{}}}function Qn(){return{}}var es=(t,e)=>_(t.innerType._def,e);var ts=(t,e,r)=>{switch(e){case m.ZodString:return ir(t,r);case m.ZodNumber:return Bn(t,r);case m.ZodObject:return zn(t,r);case m.ZodBigInt:return Cn(t,r);case m.ZodBoolean:return Rn();case m.ZodDate:return jr(t,r);case m.ZodUndefined:return Xn();case m.ZodNull:return Fn(r);case m.ZodArray:return An(t,r);case m.ZodUnion:case m.ZodDiscriminatedUnion:return Zn(t,r);case m.ZodIntersection:return Dn(t,r);case m.ZodTuple:return Yn(t,r);case m.ZodRecord:return lr(t,r);case m.ZodLiteral:return jn(t,r);case m.ZodEnum:return Mn(t);case m.ZodNativeEnum:return Un(t);case m.ZodNullable:return Jn(t,r);case m.ZodOptional:return Gn(t,r);case m.ZodMap:return qn(t,r);case m.ZodSet:return Hn(t,r);case m.ZodLazy:return()=>t.getter()._def;case m.ZodPromise:return Wn(t,r);case m.ZodNaN:case m.ZodNever:return Ln();case m.ZodEffects:return On(t,r);case m.ZodAny:return kn();case m.ZodUnknown:return Qn();case m.ZodDefault:return Pn(t,r);case m.ZodBranded:return or(t,r);case m.ZodReadonly:return es(t,r);case m.ZodCatch:return Nn(t,r);case m.ZodPipeline:return Kn(t,r);case m.ZodFunction:case m.ZodVoid:case m.ZodSymbol:return;default:return(a=>{})(e)}};function _(t,e,r=!1){var i;let a=e.seen.get(t);if(e.override){let l=(i=e.override)==null?void 0:i.call(e,t,e,a,r);if(l!==dn)return l}if(a&&!r){let l=ml(a,e);if(l!==void 0)return l}let n={def:t,path:e.currentPath,jsonSchema:void 0};e.seen.set(t,n);let s=ts(t,t.typeName,e),o=typeof s=="function"?_(s(),e):s;if(o&&hl(t,e,o),e.postProcess){let l=e.postProcess(o,t,e);return n.jsonSchema=o,l}return n.jsonSchema=o,o}var ml=(t,e)=>{switch(e.$refStrategy){case"root":return{$ref:t.path.join("/")};case"relative":return{$ref:fl(e.currentPath,t.path)};case"none":case"seen":return t.path.length<e.currentPath.length&&t.path.every((r,a)=>e.currentPath[a]===r)?(console.warn(`Recursive reference detected at ${e.currentPath.join("/")}! Defaulting to any`),{}):e.$refStrategy==="seen"?{}:void 0}},fl=(t,e)=>{let r=0;for(;r<t.length&&r<e.length&&t[r]===e[r];r++);return[(t.length-r).toString(),...e.slice(r)].join("/")},hl=(t,e,r)=>(t.description&&(r.description=t.description,e.markdownDescription&&(r.markdownDescription=t.description)),r);var rs=(t,e)=>{var l;let r=mn(e),a=typeof e=="object"&&e.definitions?Object.entries(e.definitions).reduce((u,[d,f])=>{var w;return{...u,[d]:(w=_(f._def,{...r,currentPath:[...r.basePath,r.definitionPath,d]},!0))!=null?w:{}}},{}):void 0,n=typeof e=="string"?e:(e==null?void 0:e.nameStrategy)==="title"||e==null?void 0:e.name,s=(l=_(t._def,n===void 0?r:{...r,currentPath:[...r.basePath,r.definitionPath,n]},!1))!=null?l:{},o=typeof e=="object"&&e.name!==void 0&&e.nameStrategy==="title"?e.name:void 0;o!==void 0&&(s.title=o);let i=n===void 0?a?{...s,[r.definitionPath]:a}:s:{$ref:[...r.$refStrategy==="relative"?[]:r.basePath,r.definitionPath,n].join("/"),[r.definitionPath]:{...a,[n]:s}};return r.target==="jsonSchema7"?i.$schema="http://json-schema.org/draft-07/schema#":(r.target==="jsonSchema2019-09"||r.target==="openAi")&&(i.$schema="https://json-schema.org/draft/2019-09/schema#"),r.target==="openAi"&&("anyOf"in i||"oneOf"in i||"allOf"in i||"type"in i&&Array.isArray(i.type))&&console.warn("Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property."),i};var as=rs;var Dt={code:"0",name:"text",parse:t=>{if(typeof t!="string")throw new Error('"text" parts expect a string value.');return{type:"text",value:t}}},jt={code:"3",name:"error",parse:t=>{if(typeof t!="string")throw new Error('"error" parts expect a string value.');return{type:"error",value:t}}},$t={code:"4",name:"assistant_message",parse:t=>{if(t==null||typeof t!="object"||!("id"in t)||!("role"in t)||!("content"in t)||typeof t.id!="string"||typeof t.role!="string"||t.role!=="assistant"||!Array.isArray(t.content)||!t.content.every(e=>e!=null&&typeof e=="object"&&"type"in e&&e.type==="text"&&"text"in e&&e.text!=null&&typeof e.text=="object"&&"value"in e.text&&typeof e.text.value=="string"))throw new Error('"assistant_message" parts expect an object with an "id", "role", and "content" property.');return{type:"assistant_message",value:t}}},qt={code:"5",name:"assistant_control_data",parse:t=>{if(t==null||typeof t!="object"||!("threadId"in t)||!("messageId"in t)||typeof t.threadId!="string"||typeof t.messageId!="string")throw new Error('"assistant_control_data" parts expect an object with a "threadId" and "messageId" property.');return{type:"assistant_control_data",value:{threadId:t.threadId,messageId:t.messageId}}}},Ut={code:"6",name:"data_message",parse:t=>{if(t==null||typeof t!="object"||!("role"in t)||!("data"in t)||typeof t.role!="string"||t.role!=="data")throw new Error('"data_message" parts expect an object with a "role" and "data" property.');return{type:"data_message",value:t}}},gl=[Dt,jt,$t,qt,Ut],rf={[Dt.code]:Dt,[jt.code]:jt,[$t.code]:$t,[qt.code]:qt,[Ut.code]:Ut},af={[Dt.name]:Dt.code,[jt.name]:jt.code,[$t.name]:$t.code,[qt.name]:qt.code,[Ut.name]:Ut.code},nf=gl.map(t=>t.code);function yl(t){let e=["ROOT"],r=-1,a=null;function n(l,u,d){switch(l){case'"':{r=u,e.pop(),e.push(d),e.push("INSIDE_STRING");break}case"f":case"t":case"n":{r=u,a=u,e.pop(),e.push(d),e.push("INSIDE_LITERAL");break}case"-":{e.pop(),e.push(d),e.push("INSIDE_NUMBER");break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{r=u,e.pop(),e.push(d),e.push("INSIDE_NUMBER");break}case"{":{r=u,e.pop(),e.push(d),e.push("INSIDE_OBJECT_START");break}case"[":{r=u,e.pop(),e.push(d),e.push("INSIDE_ARRAY_START");break}}}function s(l,u){switch(l){case",":{e.pop(),e.push("INSIDE_OBJECT_AFTER_COMMA");break}case"}":{r=u,e.pop();break}}}function o(l,u){switch(l){case",":{e.pop(),e.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{r=u,e.pop();break}}}for(let l=0;l<t.length;l++){let u=t[l];switch(e[e.length-1]){case"ROOT":n(u,l,"FINISH");break;case"INSIDE_OBJECT_START":{switch(u){case'"':{e.pop(),e.push("INSIDE_OBJECT_KEY");break}case"}":{r=l,e.pop();break}}break}case"INSIDE_OBJECT_AFTER_COMMA":{switch(u){case'"':{e.pop(),e.push("INSIDE_OBJECT_KEY");break}}break}case"INSIDE_OBJECT_KEY":{switch(u){case'"':{e.pop(),e.push("INSIDE_OBJECT_AFTER_KEY");break}}break}case"INSIDE_OBJECT_AFTER_KEY":{switch(u){case":":{e.pop(),e.push("INSIDE_OBJECT_BEFORE_VALUE");break}}break}case"INSIDE_OBJECT_BEFORE_VALUE":{n(u,l,"INSIDE_OBJECT_AFTER_VALUE");break}case"INSIDE_OBJECT_AFTER_VALUE":{s(u,l);break}case"INSIDE_STRING":{switch(u){case'"':{e.pop(),r=l;break}case"\\":{e.push("INSIDE_STRING_ESCAPE");break}default:r=l}break}case"INSIDE_ARRAY_START":{switch(u){case"]":{r=l,e.pop();break}default:{r=l,n(u,l,"INSIDE_ARRAY_AFTER_VALUE");break}}break}case"INSIDE_ARRAY_AFTER_VALUE":{switch(u){case",":{e.pop(),e.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{r=l,e.pop();break}default:{r=l;break}}break}case"INSIDE_ARRAY_AFTER_COMMA":{n(u,l,"INSIDE_ARRAY_AFTER_VALUE");break}case"INSIDE_STRING_ESCAPE":{e.pop(),r=l;break}case"INSIDE_NUMBER":{switch(u){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{r=l;break}case"e":case"E":case"-":case".":break;case",":{e.pop(),e[e.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&o(u,l),e[e.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&s(u,l);break}case"}":{e.pop(),e[e.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&s(u,l);break}case"]":{e.pop(),e[e.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&o(u,l);break}default:{e.pop();break}}break}case"INSIDE_LITERAL":{let f=t.substring(a,l+1);!"false".startsWith(f)&&!"true".startsWith(f)&&!"null".startsWith(f)?(e.pop(),e[e.length-1]==="INSIDE_OBJECT_AFTER_VALUE"?s(u,l):e[e.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&o(u,l)):r=l;break}}}let i=t.slice(0,r+1);for(let l=e.length-1;l>=0;l--)switch(e[l]){case"INSIDE_STRING":{i+='"';break}case"INSIDE_OBJECT_KEY":case"INSIDE_OBJECT_AFTER_KEY":case"INSIDE_OBJECT_AFTER_COMMA":case"INSIDE_OBJECT_START":case"INSIDE_OBJECT_BEFORE_VALUE":case"INSIDE_OBJECT_AFTER_VALUE":{i+="}";break}case"INSIDE_ARRAY_START":case"INSIDE_ARRAY_AFTER_COMMA":case"INSIDE_ARRAY_AFTER_VALUE":{i+="]";break}case"INSIDE_LITERAL":{let d=t.substring(a,t.length);"true".startsWith(d)?i+="true".slice(d.length):"false".startsWith(d)?i+="false".slice(d.length):"null".startsWith(d)&&(i+="null".slice(d.length))}}return i}function ns(t){if(t===void 0)return{value:void 0,state:"undefined-input"};let e=Ee({text:t});return e.success?{value:e.value,state:"successful-parse"}:(e=Ee({text:yl(t)}),e.success?{value:e.value,state:"repaired-parse"}:{value:void 0,state:"failed-parse"})}var vl={code:"0",name:"text",parse:t=>{if(typeof t!="string")throw new Error('"text" parts expect a string value.');return{type:"text",value:t}}},_l={code:"2",name:"data",parse:t=>{if(!Array.isArray(t))throw new Error('"data" parts expect an array value.');return{type:"data",value:t}}},bl={code:"3",name:"error",parse:t=>{if(typeof t!="string")throw new Error('"error" parts expect a string value.');return{type:"error",value:t}}},wl={code:"8",name:"message_annotations",parse:t=>{if(!Array.isArray(t))throw new Error('"message_annotations" parts expect an array value.');return{type:"message_annotations",value:t}}},xl={code:"9",name:"tool_call",parse:t=>{if(t==null||typeof t!="object"||!("toolCallId"in t)||typeof t.toolCallId!="string"||!("toolName"in t)||typeof t.toolName!="string"||!("args"in t)||typeof t.args!="object")throw new Error('"tool_call" parts expect an object with a "toolCallId", "toolName", and "args" property.');return{type:"tool_call",value:t}}},Sl={code:"a",name:"tool_result",parse:t=>{if(t==null||typeof t!="object"||!("toolCallId"in t)||typeof t.toolCallId!="string"||!("result"in t))throw new Error('"tool_result" parts expect an object with a "toolCallId" and a "result" property.');return{type:"tool_result",value:t}}},Tl={code:"b",name:"tool_call_streaming_start",parse:t=>{if(t==null||typeof t!="object"||!("toolCallId"in t)||typeof t.toolCallId!="string"||!("toolName"in t)||typeof t.toolName!="string")throw new Error('"tool_call_streaming_start" parts expect an object with a "toolCallId" and "toolName" property.');return{type:"tool_call_streaming_start",value:t}}},Il={code:"c",name:"tool_call_delta",parse:t=>{if(t==null||typeof t!="object"||!("toolCallId"in t)||typeof t.toolCallId!="string"||!("argsTextDelta"in t)||typeof t.argsTextDelta!="string")throw new Error('"tool_call_delta" parts expect an object with a "toolCallId" and "argsTextDelta" property.');return{type:"tool_call_delta",value:t}}},El={code:"d",name:"finish_message",parse:t=>{if(t==null||typeof t!="object"||!("finishReason"in t)||typeof t.finishReason!="string")throw new Error('"finish_message" parts expect an object with a "finishReason" property.');let e={finishReason:t.finishReason};return"usage"in t&&t.usage!=null&&typeof t.usage=="object"&&"promptTokens"in t.usage&&"completionTokens"in t.usage&&(e.usage={promptTokens:typeof t.usage.promptTokens=="number"?t.usage.promptTokens:Number.NaN,completionTokens:typeof t.usage.completionTokens=="number"?t.usage.completionTokens:Number.NaN}),{type:"finish_message",value:e}}},kl={code:"e",name:"finish_step",parse:t=>{if(t==null||typeof t!="object"||!("finishReason"in t)||typeof t.finishReason!="string")throw new Error('"finish_step" parts expect an object with a "finishReason" property.');let e={finishReason:t.finishReason,isContinued:!1};return"usage"in t&&t.usage!=null&&typeof t.usage=="object"&&"promptTokens"in t.usage&&"completionTokens"in t.usage&&(e.usage={promptTokens:typeof t.usage.promptTokens=="number"?t.usage.promptTokens:Number.NaN,completionTokens:typeof t.usage.completionTokens=="number"?t.usage.completionTokens:Number.NaN}),"isContinued"in t&&typeof t.isContinued=="boolean"&&(e.isContinued=t.isContinued),{type:"finish_step",value:e}}},Al={code:"f",name:"start_step",parse:t=>{if(t==null||typeof t!="object"||!("messageId"in t)||typeof t.messageId!="string")throw new Error('"start_step" parts expect an object with an "id" property.');return{type:"start_step",value:{messageId:t.messageId}}}},Cl={code:"g",name:"reasoning",parse:t=>{if(typeof t!="string")throw new Error('"reasoning" parts expect a string value.');return{type:"reasoning",value:t}}},Rl={code:"h",name:"source",parse:t=>{if(t==null||typeof t!="object")throw new Error('"source" parts expect a Source object.');return{type:"source",value:t}}},Nl={code:"i",name:"redacted_reasoning",parse:t=>{if(t==null||typeof t!="object"||!("data"in t)||typeof t.data!="string")throw new Error('"redacted_reasoning" parts expect an object with a "data" property.');return{type:"redacted_reasoning",value:{data:t.data}}}},Pl={code:"j",name:"reasoning_signature",parse:t=>{if(t==null||typeof t!="object"||!("signature"in t)||typeof t.signature!="string")throw new Error('"reasoning_signature" parts expect an object with a "signature" property.');return{type:"reasoning_signature",value:{signature:t.signature}}}},ur=[vl,_l,bl,wl,xl,Sl,Tl,Il,El,kl,Al,Cl,Rl,Nl,Pl],of=Object.fromEntries(ur.map(t=>[t.code,t])),lf=Object.fromEntries(ur.map(t=>[t.name,t.code])),uf=ur.map(t=>t.code);function cr(t,e){let r=ur.find(a=>a.name===t);if(!r)throw new Error(`Invalid stream part type: ${t}`);return`${r.code}:${JSON.stringify(e)}
`}var cf=`
`.charCodeAt(0);var df=`
`.charCodeAt(0);function Ol(t,e){var r;let a=(r=e==null?void 0:e.useReferences)!=null?r:!1;return Ml(as(t,{$refStrategy:a?"root":"none",target:"jsonSchema7"}),{validate:n=>{let s=t.safeParse(n);return s.success?{success:!0,value:s.data}:{success:!1,error:s.error}}})}var Ur=Symbol.for("vercel.ai.schema");function Ml(t,{validate:e}={}){return{[Ur]:!0,_type:void 0,[At]:!0,jsonSchema:t,validate:e}}function Dl(t){return typeof t=="object"&&t!==null&&Ur in t&&t[Ur]===!0&&"jsonSchema"in t&&"validate"in t}function Lt(t){return Dl(t)?t:Ol(t)}var ss=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof global=="object"?global:{};var Pe="1.9.0";var os=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function jl(t){var e=new Set([t]),r=new Set,a=t.match(os);if(!a)return function(){return!1};var n={major:+a[1],minor:+a[2],patch:+a[3],prerelease:a[4]};if(n.prerelease!=null)return function(l){return l===t};function s(i){return r.add(i),!1}function o(i){return e.add(i),!0}return function(l){if(e.has(l))return!0;if(r.has(l))return!1;var u=l.match(os);if(!u)return s(l);var d={major:+u[1],minor:+u[2],patch:+u[3],prerelease:u[4]};return d.prerelease!=null||n.major!==d.major?s(l):n.major===0?n.minor===d.minor&&n.patch<=d.patch?o(l):s(l):n.minor<=d.minor?o(l):s(l)}}var is=jl(Pe);var $l=Pe.split(".")[0],Ft=Symbol.for("opentelemetry.js.api."+$l),Vt=ss;function dt(t,e,r,a){var n;a===void 0&&(a=!1);var s=Vt[Ft]=(n=Vt[Ft])!==null&&n!==void 0?n:{version:Pe};if(!a&&s[t]){var o=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+t);return r.error(o.stack||o.message),!1}if(s.version!==Pe){var o=new Error("@opentelemetry/api: Registration of version v"+s.version+" for "+t+" does not match previously registered API v"+Pe);return r.error(o.stack||o.message),!1}return s[t]=e,r.debug("@opentelemetry/api: Registered a global for "+t+" v"+Pe+"."),!0}function Oe(t){var e,r,a=(e=Vt[Ft])===null||e===void 0?void 0:e.version;if(!(!a||!is(a)))return(r=Vt[Ft])===null||r===void 0?void 0:r[t]}function pt(t,e){e.debug("@opentelemetry/api: Unregistering a global for "+t+" v"+Pe+".");var r=Vt[Ft];r&&delete r[t]}var ql=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var a=r.call(t),n,s=[],o;try{for(;(e===void 0||e-- >0)&&!(n=a.next()).done;)s.push(n.value)}catch(i){o={error:i}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return s},Ul=function(t,e,r){if(r||arguments.length===2)for(var a=0,n=e.length,s;a<n;a++)(s||!(a in e))&&(s||(s=Array.prototype.slice.call(e,0,a)),s[a]=e[a]);return t.concat(s||Array.prototype.slice.call(e))},ls=function(){function t(e){this._namespace=e.namespace||"DiagComponentLogger"}return t.prototype.debug=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return Zt("debug",this._namespace,e)},t.prototype.error=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return Zt("error",this._namespace,e)},t.prototype.info=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return Zt("info",this._namespace,e)},t.prototype.warn=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return Zt("warn",this._namespace,e)},t.prototype.verbose=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return Zt("verbose",this._namespace,e)},t}();function Zt(t,e,r){var a=Oe("diag");if(a)return r.unshift(e),a[t].apply(a,Ul([],ql(r),!1))}var W;(function(t){t[t.NONE=0]="NONE",t[t.ERROR=30]="ERROR",t[t.WARN=50]="WARN",t[t.INFO=60]="INFO",t[t.DEBUG=70]="DEBUG",t[t.VERBOSE=80]="VERBOSE",t[t.ALL=9999]="ALL"})(W||(W={}));function us(t,e){t<W.NONE?t=W.NONE:t>W.ALL&&(t=W.ALL),e=e||{};function r(a,n){var s=e[a];return typeof s=="function"&&t>=n?s.bind(e):function(){}}return{error:r("error",W.ERROR),warn:r("warn",W.WARN),info:r("info",W.INFO),debug:r("debug",W.DEBUG),verbose:r("verbose",W.VERBOSE)}}var Ll=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var a=r.call(t),n,s=[],o;try{for(;(e===void 0||e-- >0)&&!(n=a.next()).done;)s.push(n.value)}catch(i){o={error:i}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return s},Fl=function(t,e,r){if(r||arguments.length===2)for(var a=0,n=e.length,s;a<n;a++)(s||!(a in e))&&(s||(s=Array.prototype.slice.call(e,0,a)),s[a]=e[a]);return t.concat(s||Array.prototype.slice.call(e))},Vl="diag",mt=function(){function t(){function e(n){return function(){for(var s=[],o=0;o<arguments.length;o++)s[o]=arguments[o];var i=Oe("diag");if(i)return i[n].apply(i,Fl([],Ll(s),!1))}}var r=this,a=function(n,s){var o,i,l;if(s===void 0&&(s={logLevel:W.INFO}),n===r){var u=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return r.error((o=u.stack)!==null&&o!==void 0?o:u.message),!1}typeof s=="number"&&(s={logLevel:s});var d=Oe("diag"),f=us((i=s.logLevel)!==null&&i!==void 0?i:W.INFO,n);if(d&&!s.suppressOverrideMessage){var w=(l=new Error().stack)!==null&&l!==void 0?l:"<failed to generate stacktrace>";d.warn("Current logger will be overwritten from "+w),f.warn("Current logger will overwrite one already registered from "+w)}return dt("diag",f,r,!0)};r.setLogger=a,r.disable=function(){pt(Vl,r)},r.createComponentLogger=function(n){return new ls(n)},r.verbose=e("verbose"),r.debug=e("debug"),r.info=e("info"),r.warn=e("warn"),r.error=e("error")}return t.instance=function(){return this._instance||(this._instance=new t),this._instance},t}();function cs(t){return Symbol.for(t)}var Zl=function(){function t(e){var r=this;r._currentContext=e?new Map(e):new Map,r.getValue=function(a){return r._currentContext.get(a)},r.setValue=function(a,n){var s=new t(r._currentContext);return s._currentContext.set(a,n),s},r.deleteValue=function(a){var n=new t(r._currentContext);return n._currentContext.delete(a),n}}return t}(),ds=new Zl;var Jl=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var a=r.call(t),n,s=[],o;try{for(;(e===void 0||e-- >0)&&!(n=a.next()).done;)s.push(n.value)}catch(i){o={error:i}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return s},Bl=function(t,e,r){if(r||arguments.length===2)for(var a=0,n=e.length,s;a<n;a++)(s||!(a in e))&&(s||(s=Array.prototype.slice.call(e,0,a)),s[a]=e[a]);return t.concat(s||Array.prototype.slice.call(e))},ps=function(){function t(){}return t.prototype.active=function(){return ds},t.prototype.with=function(e,r,a){for(var n=[],s=3;s<arguments.length;s++)n[s-3]=arguments[s];return r.call.apply(r,Bl([a],Jl(n),!1))},t.prototype.bind=function(e,r){return r},t.prototype.enable=function(){return this},t.prototype.disable=function(){return this},t}();var zl=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var a=r.call(t),n,s=[],o;try{for(;(e===void 0||e-- >0)&&!(n=a.next()).done;)s.push(n.value)}catch(i){o={error:i}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return s},Gl=function(t,e,r){if(r||arguments.length===2)for(var a=0,n=e.length,s;a<n;a++)(s||!(a in e))&&(s||(s=Array.prototype.slice.call(e,0,a)),s[a]=e[a]);return t.concat(s||Array.prototype.slice.call(e))},Lr="context",Kl=new ps,dr=function(){function t(){}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalContextManager=function(e){return dt(Lr,e,mt.instance())},t.prototype.active=function(){return this._getContextManager().active()},t.prototype.with=function(e,r,a){for(var n,s=[],o=3;o<arguments.length;o++)s[o-3]=arguments[o];return(n=this._getContextManager()).with.apply(n,Gl([e,r,a],zl(s),!1))},t.prototype.bind=function(e,r){return this._getContextManager().bind(e,r)},t.prototype._getContextManager=function(){return Oe(Lr)||Kl},t.prototype.disable=function(){this._getContextManager().disable(),pt(Lr,mt.instance())},t}();var pr;(function(t){t[t.NONE=0]="NONE",t[t.SAMPLED=1]="SAMPLED"})(pr||(pr={}));var Fr="0000000000000000",Vr="00000000000000000000000000000000",ms={traceId:Vr,spanId:Fr,traceFlags:pr.NONE};var $e=function(){function t(e){e===void 0&&(e=ms),this._spanContext=e}return t.prototype.spanContext=function(){return this._spanContext},t.prototype.setAttribute=function(e,r){return this},t.prototype.setAttributes=function(e){return this},t.prototype.addEvent=function(e,r){return this},t.prototype.addLink=function(e){return this},t.prototype.addLinks=function(e){return this},t.prototype.setStatus=function(e){return this},t.prototype.updateName=function(e){return this},t.prototype.end=function(e){},t.prototype.isRecording=function(){return!1},t.prototype.recordException=function(e,r){},t}();var Zr=cs("OpenTelemetry Context Key SPAN");function mr(t){return t.getValue(Zr)||void 0}function fs(){return mr(dr.getInstance().active())}function Jt(t,e){return t.setValue(Zr,e)}function hs(t){return t.deleteValue(Zr)}function gs(t,e){return Jt(t,new $e(e))}function fr(t){var e;return(e=mr(t))===null||e===void 0?void 0:e.spanContext()}var Wl=/^([0-9a-f]{32})$/i,Hl=/^[0-9a-f]{16}$/i;function Yl(t){return Wl.test(t)&&t!==Vr}function Xl(t){return Hl.test(t)&&t!==Fr}function hr(t){return Yl(t.traceId)&&Xl(t.spanId)}function ys(t){return new $e(t)}var Jr=dr.getInstance(),gr=function(){function t(){}return t.prototype.startSpan=function(e,r,a){a===void 0&&(a=Jr.active());var n=Boolean(r==null?void 0:r.root);if(n)return new $e;var s=a&&fr(a);return Ql(s)&&hr(s)?new $e(s):new $e},t.prototype.startActiveSpan=function(e,r,a,n){var s,o,i;if(!(arguments.length<2)){arguments.length===2?i=r:arguments.length===3?(s=r,i=a):(s=r,o=a,i=n);var l=o!=null?o:Jr.active(),u=this.startSpan(e,s,l),d=Jt(l,u);return Jr.with(d,i,void 0,u)}},t}();function Ql(t){return typeof t=="object"&&typeof t.spanId=="string"&&typeof t.traceId=="string"&&typeof t.traceFlags=="number"}var eu=new gr,vs=function(){function t(e,r,a,n){this._provider=e,this.name=r,this.version=a,this.options=n}return t.prototype.startSpan=function(e,r,a){return this._getTracer().startSpan(e,r,a)},t.prototype.startActiveSpan=function(e,r,a,n){var s=this._getTracer();return Reflect.apply(s.startActiveSpan,s,arguments)},t.prototype._getTracer=function(){if(this._delegate)return this._delegate;var e=this._provider.getDelegateTracer(this.name,this.version,this.options);return e?(this._delegate=e,this._delegate):eu},t}();var _s=function(){function t(){}return t.prototype.getTracer=function(e,r,a){return new gr},t}();var tu=new _s,Br=function(){function t(){}return t.prototype.getTracer=function(e,r,a){var n;return(n=this.getDelegateTracer(e,r,a))!==null&&n!==void 0?n:new vs(this,e,r,a)},t.prototype.getDelegate=function(){var e;return(e=this._delegate)!==null&&e!==void 0?e:tu},t.prototype.setDelegate=function(e){this._delegate=e},t.prototype.getDelegateTracer=function(e,r,a){var n;return(n=this._delegate)===null||n===void 0?void 0:n.getTracer(e,r,a)},t}();var ft;(function(t){t[t.UNSET=0]="UNSET",t[t.OK=1]="OK",t[t.ERROR=2]="ERROR"})(ft||(ft={}));var zr="trace",bs=function(){function t(){this._proxyTracerProvider=new Br,this.wrapSpanContext=ys,this.isSpanContextValid=hr,this.deleteSpan=hs,this.getSpan=mr,this.getActiveSpan=fs,this.getSpanContext=fr,this.setSpan=Jt,this.setSpanContext=gs}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalTracerProvider=function(e){var r=dt(zr,this._proxyTracerProvider,mt.instance());return r&&this._proxyTracerProvider.setDelegate(e),r},t.prototype.getTracerProvider=function(){return Oe(zr)||this._proxyTracerProvider},t.prototype.getTracer=function(e,r){return this.getTracerProvider().getTracer(e,r)},t.prototype.disable=function(){pt(zr,mt.instance()),this._proxyTracerProvider=new Br},t}();var Gr=bs.getInstance();var ru=Object.defineProperty,ea=(t,e)=>{for(var r in e)ru(t,r,{get:e[r],enumerable:!0})};function ta(t,{contentType:e,dataStreamVersion:r}){let a=new Headers(t!=null?t:{});return a.has("Content-Type")||a.set("Content-Type",e),r!==void 0&&a.set("X-Vercel-AI-Data-Stream",r),a}var ks="AI_InvalidArgumentError",As=`vercel.ai.error.${ks}`,au=Symbol.for(As),Cs,M=class extends T{constructor({parameter:t,value:e,message:r}){super({name:ks,message:`Invalid argument for parameter ${t}: ${r}`}),this[Cs]=!0,this.parameter=t,this.value=e}static isInstance(t){return T.hasMarker(t,As)}};Cs=au;var Rs="AI_RetryError",Ns=`vercel.ai.error.${Rs}`,nu=Symbol.for(Ns),Ps,ws=class extends T{constructor({message:t,reason:e,errors:r}){super({name:Rs,message:t}),this[Ps]=!0,this.reason=e,this.errors=r,this.lastError=r[r.length-1]}static isInstance(t){return T.hasMarker(t,Ns)}};Ps=nu;var su=({maxRetries:t=2,initialDelayInMs:e=2e3,backoffFactor:r=2}={})=>async a=>Os(a,{maxRetries:t,delayInMs:e,backoffFactor:r});async function Os(t,{maxRetries:e,delayInMs:r,backoffFactor:a},n=[]){try{return await t()}catch(s){if(kt(s)||e===0)throw s;let o=rn(s),i=[...n,s],l=i.length;if(l>e)throw new ws({message:`Failed after ${l} attempts. Last error: ${o}`,reason:"maxRetriesExceeded",errors:i});if(s instanceof Error&&X.isInstance(s)&&s.isRetryable===!0&&l<=e)return await tn(r),Os(t,{maxRetries:e,delayInMs:a*r,backoffFactor:a},i);throw l===1?s:new ws({message:`Failed after ${l} attempts with non-retryable error: '${o}'`,reason:"errorNotRetryable",errors:i})}}function ou({maxRetries:t}){if(t!=null){if(!Number.isInteger(t))throw new M({parameter:"maxRetries",value:t,message:"maxRetries must be an integer"});if(t<0)throw new M({parameter:"maxRetries",value:t,message:"maxRetries must be >= 0"})}let e=t!=null?t:2;return{maxRetries:e,retry:su({maxRetries:e})}}function Kr({operationId:t,telemetry:e}){return{"operation.name":`${t}${(e==null?void 0:e.functionId)!=null?` ${e.functionId}`:""}`,"resource.name":e==null?void 0:e.functionId,"ai.operationId":t,"ai.telemetry.functionId":e==null?void 0:e.functionId}}function iu({model:t,settings:e,telemetry:r,headers:a}){var n;return{"ai.model.provider":t.provider,"ai.model.id":t.modelId,...Object.entries(e).reduce((s,[o,i])=>(s[`ai.settings.${o}`]=i,s),{}),...Object.entries((n=r==null?void 0:r.metadata)!=null?n:{}).reduce((s,[o,i])=>(s[`ai.telemetry.metadata.${o}`]=i,s),{}),...Object.entries(a!=null?a:{}).reduce((s,[o,i])=>(i!==void 0&&(s[`ai.request.headers.${o}`]=i),s),{})}}var lu={startSpan(){return yr},startActiveSpan(t,e,r,a){if(typeof e=="function")return e(yr);if(typeof r=="function")return r(yr);if(typeof a=="function")return a(yr)}},yr={spanContext(){return uu},setAttribute(){return this},setAttributes(){return this},addEvent(){return this},addLink(){return this},addLinks(){return this},setStatus(){return this},updateName(){return this},end(){return this},isRecording(){return!1},recordException(){return this}},uu={traceId:"",spanId:"",traceFlags:0};function cu({isEnabled:t=!1,tracer:e}={}){return t?e||Gr.getTracer("ai"):lu}function Wr({name:t,tracer:e,attributes:r,fn:a,endWhenDone:n=!0}){return e.startActiveSpan(t,{attributes:r},async s=>{try{let o=await a(s);return n&&s.end(),o}catch(o){try{o instanceof Error?(s.recordException({name:o.name,message:o.message,stack:o.stack}),s.setStatus({code:ft.ERROR,message:o.message})):s.setStatus({code:ft.ERROR})}finally{s.end()}throw o}})}function ht({telemetry:t,attributes:e}){return(t==null?void 0:t.isEnabled)!==!0?{}:Object.entries(e).reduce((r,[a,n])=>{if(n===void 0)return r;if(typeof n=="object"&&"input"in n&&typeof n.input=="function"){if((t==null?void 0:t.recordInputs)===!1)return r;let s=n.input();return s===void 0?r:{...r,[a]:s}}if(typeof n=="object"&&"output"in n&&typeof n.output=="function"){if((t==null?void 0:t.recordOutputs)===!1)return r;let s=n.output();return s===void 0?r:{...r,[a]:s}}return{...r,[a]:n}},{})}var du="AI_NoImageGeneratedError",pu=`vercel.ai.error.${du}`,mu=Symbol.for(pu),fu;fu=mu;var Ms="AI_NoObjectGeneratedError",Ds=`vercel.ai.error.${Ms}`,hu=Symbol.for(Ds),js,qe=class extends T{constructor({message:t="No object generated.",cause:e,text:r,response:a,usage:n}){super({name:Ms,message:t,cause:e}),this[js]=!0,this.text=r,this.response=a,this.usage=n}static isInstance(t){return T.hasMarker(t,Ds)}};js=hu;var $s="AI_DownloadError",qs=`vercel.ai.error.${$s}`,gu=Symbol.for(qs),Us,Hr=class extends T{constructor({url:t,statusCode:e,statusText:r,cause:a,message:n=a==null?`Failed to download ${t}: ${e} ${r}`:`Failed to download ${t}: ${a}`}){super({name:$s,message:n,cause:a}),this[Us]=!0,this.url=t,this.statusCode=e,this.statusText=r}static isInstance(t){return T.hasMarker(t,qs)}};Us=gu;async function yu({url:t,fetchImplementation:e=fetch}){var r;let a=t.toString();try{let n=await e(a);if(!n.ok)throw new Hr({url:a,statusCode:n.status,statusText:n.statusText});return{data:new Uint8Array(await n.arrayBuffer()),mimeType:(r=n.headers.get("content-type"))!=null?r:void 0}}catch(n){throw Hr.isInstance(n)?n:new Hr({url:a,cause:n})}}var vu=[{mimeType:"image/gif",bytes:[71,73,70]},{mimeType:"image/png",bytes:[137,80,78,71]},{mimeType:"image/jpeg",bytes:[255,216]},{mimeType:"image/webp",bytes:[82,73,70,70]}];function _u(t){for(let{bytes:e,mimeType:r}of vu)if(t.length>=e.length&&e.every((a,n)=>t[n]===a))return r}var Ls="AI_InvalidDataContentError",Fs=`vercel.ai.error.${Ls}`,bu=Symbol.for(Fs),Vs,xs=class extends T{constructor({content:t,cause:e,message:r=`Invalid data content. Expected a base64 string, Uint8Array, ArrayBuffer, or Buffer, but got ${typeof t}.`}){super({name:Ls,message:r,cause:e}),this[Vs]=!0,this.content=t}static isInstance(t){return T.hasMarker(t,Fs)}};Vs=bu;var Zs=c.union([c.string(),c.instanceof(Uint8Array),c.instanceof(ArrayBuffer),c.custom(t=>{var e,r;return(r=(e=globalThis.Buffer)==null?void 0:e.isBuffer(t))!=null?r:!1},{message:"Must be a Buffer"})]);function wu(t){return typeof t=="string"?t:t instanceof ArrayBuffer?Ct(new Uint8Array(t)):Ct(t)}function vr(t){if(t instanceof Uint8Array)return t;if(typeof t=="string")try{return ln(t)}catch(e){throw new xs({message:"Invalid data content. Content string is not a base64-encoded media.",content:t,cause:e})}if(t instanceof ArrayBuffer)return new Uint8Array(t);throw new xs({content:t})}function xu(t){try{return new TextDecoder().decode(t)}catch(e){throw new Error("Error decoding Uint8Array to text")}}var Js="AI_InvalidMessageRoleError",Bs=`vercel.ai.error.${Js}`,Su=Symbol.for(Bs),zs,Tu=class extends T{constructor({role:t,message:e=`Invalid message role: '${t}'. Must be one of: "system", "user", "assistant", "tool".`}){super({name:Js,message:e}),this[zs]=!0,this.role=t}static isInstance(t){return T.hasMarker(t,Bs)}};zs=Su;function Iu(t){try{let[e,r]=t.split(",");return{mimeType:e.split(";")[0].split(":")[1],base64Content:r}}catch(e){return{mimeType:void 0,base64Content:void 0}}}async function Ss({prompt:t,modelSupportsImageUrls:e=!0,modelSupportsUrl:r=()=>!1,downloadImplementation:a=yu}){let n=await ku(t.messages,a,e,r);return[...t.system!=null?[{role:"system",content:t.system}]:[],...t.messages.map(s=>Eu(s,n))]}function Eu(t,e){var r,a,n,s,o,i;let l=t.role;switch(l){case"system":return{role:"system",content:t.content,providerMetadata:(r=t.providerOptions)!=null?r:t.experimental_providerMetadata};case"user":return typeof t.content=="string"?{role:"user",content:[{type:"text",text:t.content}],providerMetadata:(a=t.providerOptions)!=null?a:t.experimental_providerMetadata}:{role:"user",content:t.content.map(u=>Au(u,e)).filter(u=>u.type!=="text"||u.text!==""),providerMetadata:(n=t.providerOptions)!=null?n:t.experimental_providerMetadata};case"assistant":return typeof t.content=="string"?{role:"assistant",content:[{type:"text",text:t.content}],providerMetadata:(s=t.providerOptions)!=null?s:t.experimental_providerMetadata}:{role:"assistant",content:t.content.filter(u=>u.type!=="text"||u.text!=="").map(u=>{let{experimental_providerMetadata:d,providerOptions:f,...w}=u;return{...w,providerMetadata:f!=null?f:d}}),providerMetadata:(o=t.providerOptions)!=null?o:t.experimental_providerMetadata};case"tool":return{role:"tool",content:t.content.map(u=>{var d;return{type:"tool-result",toolCallId:u.toolCallId,toolName:u.toolName,result:u.result,content:u.experimental_content,isError:u.isError,providerMetadata:(d=u.providerOptions)!=null?d:u.experimental_providerMetadata}}),providerMetadata:(i=t.providerOptions)!=null?i:t.experimental_providerMetadata};default:{let u=l;throw new Tu({role:u})}}}async function ku(t,e,r,a){let n=t.filter(o=>o.role==="user").map(o=>o.content).filter(o=>Array.isArray(o)).flat().filter(o=>o.type==="image"||o.type==="file").filter(o=>!(o.type==="image"&&r===!0)).map(o=>o.type==="image"?o.image:o.data).map(o=>typeof o=="string"&&(o.startsWith("http:")||o.startsWith("https:"))?new URL(o):o).filter(o=>o instanceof URL).filter(o=>!a(o)),s=await Promise.all(n.map(async o=>({url:o,data:await e({url:o})})));return Object.fromEntries(s.map(({url:o,data:i})=>[o.toString(),i]))}function Au(t,e){var r;if(t.type==="text")return{type:"text",text:t.text,providerMetadata:t.experimental_providerMetadata};let a=t.mimeType,n,s,o,i=t.type;switch(i){case"image":n=t.image;break;case"file":n=t.data;break;default:throw new Error(`Unsupported part type: ${i}`)}try{s=typeof n=="string"?new URL(n):n}catch(l){s=n}if(s instanceof URL)if(s.protocol==="data:"){let{mimeType:l,base64Content:u}=Iu(s.toString());if(l==null||u==null)throw new Error(`Invalid data URL format in part ${i}`);a=l,o=vr(u)}else{let l=e[s.toString()];l?(o=l.data,a!=null||(a=l.mimeType)):o=s}else o=vr(s);switch(i){case"image":return o instanceof Uint8Array&&(a=(r=_u(o))!=null?r:a),{type:"image",image:o,mimeType:a,providerMetadata:t.experimental_providerMetadata};case"file":{if(a==null)throw new Error("Mime type is missing for file part");return{type:"file",data:o instanceof Uint8Array?wu(o):o,mimeType:a,providerMetadata:t.experimental_providerMetadata}}}}function Ts({maxTokens:t,temperature:e,topP:r,topK:a,presencePenalty:n,frequencyPenalty:s,stopSequences:o,seed:i}){if(t!=null){if(!Number.isInteger(t))throw new M({parameter:"maxTokens",value:t,message:"maxTokens must be an integer"});if(t<1)throw new M({parameter:"maxTokens",value:t,message:"maxTokens must be >= 1"})}if(e!=null&&typeof e!="number")throw new M({parameter:"temperature",value:e,message:"temperature must be a number"});if(r!=null&&typeof r!="number")throw new M({parameter:"topP",value:r,message:"topP must be a number"});if(a!=null&&typeof a!="number")throw new M({parameter:"topK",value:a,message:"topK must be a number"});if(n!=null&&typeof n!="number")throw new M({parameter:"presencePenalty",value:n,message:"presencePenalty must be a number"});if(s!=null&&typeof s!="number")throw new M({parameter:"frequencyPenalty",value:s,message:"frequencyPenalty must be a number"});if(i!=null&&!Number.isInteger(i))throw new M({parameter:"seed",value:i,message:"seed must be an integer"});return{maxTokens:t,temperature:e!=null?e:0,topP:r,topK:a,presencePenalty:n,frequencyPenalty:s,stopSequences:o!=null&&o.length>0?o:void 0,seed:i}}function Cu(t){var e,r,a;let n=[];for(let s of t){let o;try{o=new URL(s.url)}catch(i){throw new Error(`Invalid URL: ${s.url}`)}switch(o.protocol){case"http:":case"https:":{if((e=s.contentType)!=null&&e.startsWith("image/"))n.push({type:"image",image:o});else{if(!s.contentType)throw new Error("If the attachment is not an image, it must specify a content type");n.push({type:"file",data:o,mimeType:s.contentType})}break}case"data:":{let i,l,u;try{[i,l]=s.url.split(","),u=i.split(";")[0].split(":")[1]}catch(d){throw new Error(`Error processing data URL: ${s.url}`)}if(u==null||l==null)throw new Error(`Invalid data URL format: ${s.url}`);if((r=s.contentType)!=null&&r.startsWith("image/"))n.push({type:"image",image:vr(l)});else if((a=s.contentType)!=null&&a.startsWith("text/"))n.push({type:"text",text:xu(vr(l))});else{if(!s.contentType)throw new Error("If the attachment is not an image or text, it must specify a content type");n.push({type:"file",data:l,mimeType:s.contentType})}break}default:throw new Error(`Unsupported URL protocol: ${o.protocol}`)}}return n}var Gs="AI_MessageConversionError",Ks=`vercel.ai.error.${Gs}`,Ru=Symbol.for(Ks),Ws,Yr=class extends T{constructor({originalMessage:t,message:e}){super({name:Gs,message:e}),this[Ws]=!0,this.originalMessage=t}static isInstance(t){return T.hasMarker(t,Ks)}};Ws=Ru;function Nu(t,e){var r,a;let n=(r=e==null?void 0:e.tools)!=null?r:{},s=[];for(let i=0;i<t.length;i++){let l=t[i],u=i===t.length-1,{role:d,content:f,experimental_attachments:w}=l;switch(d){case"system":{s.push({role:"system",content:f});break}case"user":{s.push({role:"user",content:w?[{type:"text",text:f},...Cu(w)]:f});break}case"assistant":{if(l.parts!=null){let v=function(){let I=[];for(let P of D)switch(P.type){case"text":I.push({type:"text",text:P.text});break;case"reasoning":{for(let j of P.details)switch(j.type){case"text":I.push({type:"reasoning",text:j.text,signature:j.signature});break;case"redacted":I.push({type:"redacted-reasoning",data:j.data});break}break}case"tool-invocation":I.push({type:"tool-call",toolCallId:P.toolInvocation.toolCallId,toolName:P.toolInvocation.toolName,args:P.toolInvocation.args});break;default:{let j=P;throw new Error(`Unsupported part: ${j}`)}}s.push({role:"assistant",content:I});let le=D.filter(P=>P.type==="tool-invocation").map(P=>P.toolInvocation);le.length>0&&s.push({role:"tool",content:le.map(P=>{if(!("result"in P))throw new Yr({originalMessage:l,message:"ToolInvocation must have a result: "+JSON.stringify(P)});let{toolCallId:j,toolName:he,result:ge}=P,Se=n[he];return(Se==null?void 0:Se.experimental_toToolResultContent)!=null?{type:"tool-result",toolCallId:j,toolName:he,result:Se.experimental_toToolResultContent(ge),experimental_content:Se.experimental_toToolResultContent(ge)}:{type:"tool-result",toolCallId:j,toolName:he,result:ge}})}),D=[],N=!1,k++};var o=v;let k=0,N=!1,D=[];for(let I of l.parts)switch(I.type){case"reasoning":D.push(I);break;case"text":{N&&v(),D.push(I);break}case"tool-invocation":{((a=I.toolInvocation.step)!=null?a:0)!==k&&v(),D.push(I),N=!0;break}}v();break}let A=l.toolInvocations;if(A==null||A.length===0){s.push({role:"assistant",content:f});break}let E=A.reduce((v,k)=>{var N;return Math.max(v,(N=k.step)!=null?N:0)},0);for(let v=0;v<=E;v++){let k=A.filter(N=>{var D;return((D=N.step)!=null?D:0)===v});k.length!==0&&(s.push({role:"assistant",content:[...u&&f&&v===0?[{type:"text",text:f}]:[],...k.map(({toolCallId:N,toolName:D,args:I})=>({type:"tool-call",toolCallId:N,toolName:D,args:I}))]}),s.push({role:"tool",content:k.map(N=>{if(!("result"in N))throw new Yr({originalMessage:l,message:"ToolInvocation must have a result: "+JSON.stringify(N)});let{toolCallId:D,toolName:I,result:le}=N,P=n[I];return(P==null?void 0:P.experimental_toToolResultContent)!=null?{type:"tool-result",toolCallId:D,toolName:I,result:P.experimental_toToolResultContent(le),experimental_content:P.experimental_toToolResultContent(le)}:{type:"tool-result",toolCallId:D,toolName:I,result:le}})}))}f&&!u&&s.push({role:"assistant",content:f});break}case"data":break;default:{let A=d;throw new Yr({originalMessage:l,message:`Unsupported role: ${A}`})}}}return s}function Pu(t){if(!Array.isArray(t))return"other";if(t.length===0)return"messages";let e=t.map(Ou);return e.some(r=>r==="has-ui-specific-parts")?"ui-messages":e.every(r=>r==="has-core-specific-parts"||r==="message")?"messages":"other"}function Ou(t){return typeof t=="object"&&t!==null&&(t.role==="function"||t.role==="data"||"toolInvocations"in t||"experimental_attachments"in t)?"has-ui-specific-parts":typeof t=="object"&&t!==null&&"content"in t&&(Array.isArray(t.content)||"experimental_providerMetadata"in t||"providerOptions"in t)?"has-core-specific-parts":typeof t=="object"&&t!==null&&"role"in t&&"content"in t&&typeof t.content=="string"&&["system","user","assistant","tool"].includes(t.role)?"message":"other"}var Xr=c.lazy(()=>c.union([c.null(),c.string(),c.number(),c.boolean(),c.record(c.string(),Xr),c.array(Xr)])),$=c.record(c.string(),c.record(c.string(),Xr)),Mu=c.array(c.union([c.object({type:c.literal("text"),text:c.string()}),c.object({type:c.literal("image"),data:c.string(),mimeType:c.string().optional()})])),Hs=c.object({type:c.literal("text"),text:c.string(),providerOptions:$.optional(),experimental_providerMetadata:$.optional()}),Du=c.object({type:c.literal("image"),image:c.union([Zs,c.instanceof(URL)]),mimeType:c.string().optional(),providerOptions:$.optional(),experimental_providerMetadata:$.optional()}),ju=c.object({type:c.literal("file"),data:c.union([Zs,c.instanceof(URL)]),mimeType:c.string(),providerOptions:$.optional(),experimental_providerMetadata:$.optional()}),$u=c.object({type:c.literal("reasoning"),text:c.string(),providerOptions:$.optional(),experimental_providerMetadata:$.optional()}),qu=c.object({type:c.literal("redacted-reasoning"),data:c.string(),providerOptions:$.optional(),experimental_providerMetadata:$.optional()}),Uu=c.object({type:c.literal("tool-call"),toolCallId:c.string(),toolName:c.string(),args:c.unknown(),providerOptions:$.optional(),experimental_providerMetadata:$.optional()}),Lu=c.object({type:c.literal("tool-result"),toolCallId:c.string(),toolName:c.string(),result:c.unknown(),content:Mu.optional(),isError:c.boolean().optional(),providerOptions:$.optional(),experimental_providerMetadata:$.optional()}),Fu=c.object({role:c.literal("system"),content:c.string(),providerOptions:$.optional(),experimental_providerMetadata:$.optional()}),Vu=c.object({role:c.literal("user"),content:c.union([c.string(),c.array(c.union([Hs,Du,ju]))]),providerOptions:$.optional(),experimental_providerMetadata:$.optional()}),Zu=c.object({role:c.literal("assistant"),content:c.union([c.string(),c.array(c.union([Hs,$u,qu,Uu]))]),providerOptions:$.optional(),experimental_providerMetadata:$.optional()}),Ju=c.object({role:c.literal("tool"),content:c.array(Lu),providerOptions:$.optional(),experimental_providerMetadata:$.optional()}),Bu=c.union([Fu,Vu,Zu,Ju]);function Is({prompt:t,tools:e}){if(t.prompt==null&&t.messages==null)throw new Le({prompt:t,message:"prompt or messages must be defined"});if(t.prompt!=null&&t.messages!=null)throw new Le({prompt:t,message:"prompt and messages cannot be defined at the same time"});if(t.system!=null&&typeof t.system!="string")throw new Le({prompt:t,message:"system must be a string"});if(t.prompt!=null){if(typeof t.prompt!="string")throw new Le({prompt:t,message:"prompt must be a string"});return{type:"prompt",system:t.system,messages:[{role:"user",content:t.prompt}]}}if(t.messages!=null){let r=Pu(t.messages);if(r==="other")throw new Le({prompt:t,message:"messages must be an array of CoreMessage or UIMessage"});let a=r==="ui-messages"?Nu(t.messages,{tools:e}):t.messages,n=ve({value:a,schema:c.array(Bu)});if(!n.success)throw new Le({prompt:t,message:"messages must be an array of CoreMessage or UIMessage",cause:n.error});return{type:"messages",messages:a,system:t.system}}throw new Error("unreachable")}function gt({promptTokens:t,completionTokens:e}){return{promptTokens:t,completionTokens:e,totalTokens:t+e}}var zu="JSON schema:",Gu="You MUST answer with a JSON object that matches the JSON schema above.",Ku="You MUST answer with JSON.";function Qr({prompt:t,schema:e,schemaPrefix:r=e!=null?zu:void 0,schemaSuffix:a=e!=null?Gu:Ku}){return[t!=null&&t.length>0?t:void 0,t!=null&&t.length>0?"":void 0,r,e!=null?JSON.stringify(e):void 0,a].filter(n=>n!=null).join(`
`)}function Wu(t){let e=t.pipeThrough(new TransformStream);return e[Symbol.asyncIterator]=()=>{let r=e.getReader();return{async next(){let{done:a,value:n}=await r.read();return a?{done:!0,value:void 0}:{done:!1,value:n}}}},e}var Hu={type:"no-schema",jsonSchema:void 0,validatePartialResult({value:t,textDelta:e}){return{success:!0,value:{partial:t,textDelta:e}}},validateFinalResult(t,e){return t===void 0?{success:!1,error:new qe({message:"No object generated: response did not match schema.",text:e.text,response:e.response,usage:e.usage})}:{success:!0,value:t}},createElementStream(){throw new Ie({functionality:"element streams in no-schema mode"})}},Yu=t=>({type:"object",jsonSchema:t.jsonSchema,validatePartialResult({value:e,textDelta:r}){return{success:!0,value:{partial:e,textDelta:r}}},validateFinalResult(e){return ve({value:e,schema:t})},createElementStream(){throw new Ie({functionality:"element streams in object mode"})}}),Xu=t=>{let{$schema:e,...r}=t.jsonSchema;return{type:"enum",jsonSchema:{$schema:"http://json-schema.org/draft-07/schema#",type:"object",properties:{elements:{type:"array",items:r}},required:["elements"],additionalProperties:!1},validatePartialResult({value:a,latestObject:n,isFirstDelta:s,isFinalDelta:o}){var i;if(!Ht(a)||!Tr(a.elements))return{success:!1,error:new Q({value:a,cause:"value must be an object that contains an array of elements"})};let l=a.elements,u=[];for(let w=0;w<l.length;w++){let A=l[w],E=ve({value:A,schema:t});if(!(w===l.length-1&&!o)){if(!E.success)return E;u.push(E.value)}}let d=(i=n==null?void 0:n.length)!=null?i:0,f="";return s&&(f+="["),d>0&&(f+=","),f+=u.slice(d).map(w=>JSON.stringify(w)).join(","),o&&(f+="]"),{success:!0,value:{partial:u,textDelta:f}}},validateFinalResult(a){if(!Ht(a)||!Tr(a.elements))return{success:!1,error:new Q({value:a,cause:"value must be an object that contains an array of elements"})};let n=a.elements;for(let s of n){let o=ve({value:s,schema:t});if(!o.success)return o}return{success:!0,value:n}},createElementStream(a){let n=0;return Wu(a.pipeThrough(new TransformStream({transform(s,o){switch(s.type){case"object":{let i=s.object;for(;n<i.length;n++)o.enqueue(i[n]);break}case"text-delta":case"finish":case"error":break;default:{let i=s;throw new Error(`Unsupported chunk type: ${i}`)}}}})))}}},Qu=t=>({type:"enum",jsonSchema:{$schema:"http://json-schema.org/draft-07/schema#",type:"object",properties:{result:{type:"string",enum:t}},required:["result"],additionalProperties:!1},validateFinalResult(e){if(!Ht(e)||typeof e.result!="string")return{success:!1,error:new Q({value:e,cause:'value must be an object that contains a string in the "result" property.'})};let r=e.result;return t.includes(r)?{success:!0,value:r}:{success:!1,error:new Q({value:e,cause:"value must be a string in the enum"})}},validatePartialResult(){throw new Ie({functionality:"partial results in enum mode"})},createElementStream(){throw new Ie({functionality:"element streams in enum mode"})}});function ec({output:t,schema:e,enumValues:r}){switch(t){case"object":return Yu(Lt(e));case"array":return Xu(Lt(e));case"enum":return Qu(r);case"no-schema":return Hu;default:{let a=t;throw new Error(`Unsupported output: ${a}`)}}}function tc({output:t,mode:e,schema:r,schemaName:a,schemaDescription:n,enumValues:s}){if(t!=null&&t!=="object"&&t!=="array"&&t!=="enum"&&t!=="no-schema")throw new M({parameter:"output",value:t,message:"Invalid output type."});if(t==="no-schema"){if(e==="auto"||e==="tool")throw new M({parameter:"mode",value:e,message:'Mode must be "json" for no-schema output.'});if(r!=null)throw new M({parameter:"schema",value:r,message:"Schema is not supported for no-schema output."});if(n!=null)throw new M({parameter:"schemaDescription",value:n,message:"Schema description is not supported for no-schema output."});if(a!=null)throw new M({parameter:"schemaName",value:a,message:"Schema name is not supported for no-schema output."});if(s!=null)throw new M({parameter:"enumValues",value:s,message:"Enum values are not supported for no-schema output."})}if(t==="object"){if(r==null)throw new M({parameter:"schema",value:r,message:"Schema is required for object output."});if(s!=null)throw new M({parameter:"enumValues",value:s,message:"Enum values are not supported for object output."})}if(t==="array"){if(r==null)throw new M({parameter:"schema",value:r,message:"Element schema is required for array output."});if(s!=null)throw new M({parameter:"enumValues",value:s,message:"Enum values are not supported for array output."})}if(t==="enum"){if(r!=null)throw new M({parameter:"schema",value:r,message:"Schema is not supported for enum output."});if(n!=null)throw new M({parameter:"schemaDescription",value:n,message:"Schema description is not supported for enum output."});if(a!=null)throw new M({parameter:"schemaName",value:a,message:"Schema name is not supported for enum output."});if(s==null)throw new M({parameter:"enumValues",value:s,message:"Enum values are required for enum output."});for(let o of s)if(typeof o!="string")throw new M({parameter:"enumValues",value:o,message:"Enum values must be strings."})}}var rc=de({prefix:"aiobj",size:24});async function ra({model:t,enum:e,schema:r,schemaName:a,schemaDescription:n,mode:s,output:o="object",system:i,prompt:l,messages:u,maxRetries:d,abortSignal:f,headers:w,experimental_repairText:A,experimental_telemetry:E,experimental_providerMetadata:v,providerOptions:k=v,_internal:{generateId:N=rc,currentDate:D=()=>new Date}={},...I}){tc({output:o,mode:s,schema:r,schemaName:a,schemaDescription:n,enumValues:e});let{maxRetries:le,retry:P}=ou({maxRetries:d}),j=ec({output:o,schema:r,enumValues:e});j.type==="no-schema"&&s===void 0&&(s="json");let he=iu({model:t,telemetry:E,headers:w,settings:{...I,maxRetries:le}}),ge=cu(E);return Wr({name:"ai.generateObject",attributes:ht({telemetry:E,attributes:{...Kr({operationId:"ai.generateObject",telemetry:E}),...he,"ai.prompt":{input:()=>JSON.stringify({system:i,prompt:l,messages:u})},"ai.schema":j.jsonSchema!=null?{input:()=>JSON.stringify(j.jsonSchema)}:void 0,"ai.schema.name":a,"ai.schema.description":n,"ai.settings.output":j.type,"ai.settings.mode":s}}),tracer:ge,fn:async Se=>{var yt,vt,_t,bt;(s==="auto"||s==null)&&(s=t.defaultObjectGenerationMode);let ae,ue,Y,F,Te,U,B,br,wr;switch(s){case"json":{let q=Is({prompt:{system:j.jsonSchema==null?Qr({prompt:i}):t.supportsStructuredOutputs?i:Qr({prompt:i,schema:j.jsonSchema}),prompt:l,messages:u},tools:void 0}),ne=await Ss({prompt:q,modelSupportsImageUrls:t.supportsImageUrls,modelSupportsUrl:(yt=t.supportsUrl)==null?void 0:yt.bind(t)}),J=await P(()=>Wr({name:"ai.generateObject.doGenerate",attributes:ht({telemetry:E,attributes:{...Kr({operationId:"ai.generateObject.doGenerate",telemetry:E}),...he,"ai.prompt.format":{input:()=>q.type},"ai.prompt.messages":{input:()=>JSON.stringify(ne)},"ai.settings.mode":s,"gen_ai.system":t.provider,"gen_ai.request.model":t.modelId,"gen_ai.request.frequency_penalty":I.frequencyPenalty,"gen_ai.request.max_tokens":I.maxTokens,"gen_ai.request.presence_penalty":I.presencePenalty,"gen_ai.request.temperature":I.temperature,"gen_ai.request.top_k":I.topK,"gen_ai.request.top_p":I.topP}}),tracer:ge,fn:async ce=>{var zt,wt,xt,St,Tt,It;let V=await t.doGenerate({mode:{type:"object-json",schema:j.jsonSchema,name:a,description:n},...Ts(I),inputFormat:q.type,prompt:ne,providerMetadata:k,abortSignal:f,headers:w}),ye={id:(wt=(zt=V.response)==null?void 0:zt.id)!=null?wt:N(),timestamp:(St=(xt=V.response)==null?void 0:xt.timestamp)!=null?St:D(),modelId:(It=(Tt=V.response)==null?void 0:Tt.modelId)!=null?It:t.modelId};if(V.text===void 0)throw new qe({message:"No object generated: the model did not return a response.",response:ye,usage:gt(V.usage)});return ce.setAttributes(ht({telemetry:E,attributes:{"ai.response.finishReason":V.finishReason,"ai.response.object":{output:()=>V.text},"ai.response.id":ye.id,"ai.response.model":ye.modelId,"ai.response.timestamp":ye.timestamp.toISOString(),"ai.usage.promptTokens":V.usage.promptTokens,"ai.usage.completionTokens":V.usage.completionTokens,"gen_ai.response.finish_reasons":[V.finishReason],"gen_ai.response.id":ye.id,"gen_ai.response.model":ye.modelId,"gen_ai.usage.prompt_tokens":V.usage.promptTokens,"gen_ai.usage.completion_tokens":V.usage.completionTokens}})),{...V,objectText:V.text,responseData:ye}}}));ae=J.objectText,ue=J.finishReason,Y=J.usage,F=J.warnings,Te=J.rawResponse,br=J.logprobs,wr=J.providerMetadata,B=(vt=J.request)!=null?vt:{},U=J.responseData;break}case"tool":{let q=Is({prompt:{system:i,prompt:l,messages:u},tools:void 0}),ne=await Ss({prompt:q,modelSupportsImageUrls:t.supportsImageUrls,modelSupportsUrl:(_t=t.supportsUrl)==null?void 0:_t.bind(t)}),J=q.type,ce=await P(()=>Wr({name:"ai.generateObject.doGenerate",attributes:ht({telemetry:E,attributes:{...Kr({operationId:"ai.generateObject.doGenerate",telemetry:E}),...he,"ai.prompt.format":{input:()=>J},"ai.prompt.messages":{input:()=>JSON.stringify(ne)},"ai.settings.mode":s,"gen_ai.system":t.provider,"gen_ai.request.model":t.modelId,"gen_ai.request.frequency_penalty":I.frequencyPenalty,"gen_ai.request.max_tokens":I.maxTokens,"gen_ai.request.presence_penalty":I.presencePenalty,"gen_ai.request.temperature":I.temperature,"gen_ai.request.top_k":I.topK,"gen_ai.request.top_p":I.topP}}),tracer:ge,fn:async zt=>{var wt,xt,St,Tt,It,V,ye,la;let se=await t.doGenerate({mode:{type:"object-tool",tool:{type:"function",name:a!=null?a:"json",description:n!=null?n:"Respond with a JSON object.",parameters:j.jsonSchema}},...Ts(I),inputFormat:J,prompt:ne,providerMetadata:k,abortSignal:f,headers:w}),xr=(xt=(wt=se.toolCalls)==null?void 0:wt[0])==null?void 0:xt.args,Ue={id:(Tt=(St=se.response)==null?void 0:St.id)!=null?Tt:N(),timestamp:(V=(It=se.response)==null?void 0:It.timestamp)!=null?V:D(),modelId:(la=(ye=se.response)==null?void 0:ye.modelId)!=null?la:t.modelId};if(xr===void 0)throw new qe({message:"No object generated: the tool was not called.",response:Ue,usage:gt(se.usage)});return zt.setAttributes(ht({telemetry:E,attributes:{"ai.response.finishReason":se.finishReason,"ai.response.object":{output:()=>xr},"ai.response.id":Ue.id,"ai.response.model":Ue.modelId,"ai.response.timestamp":Ue.timestamp.toISOString(),"ai.usage.promptTokens":se.usage.promptTokens,"ai.usage.completionTokens":se.usage.completionTokens,"gen_ai.response.finish_reasons":[se.finishReason],"gen_ai.response.id":Ue.id,"gen_ai.response.model":Ue.modelId,"gen_ai.usage.input_tokens":se.usage.promptTokens,"gen_ai.usage.output_tokens":se.usage.completionTokens}})),{...se,objectText:xr,responseData:Ue}}}));ae=ce.objectText,ue=ce.finishReason,Y=ce.usage,F=ce.warnings,Te=ce.rawResponse,br=ce.logprobs,wr=ce.providerMetadata,B=(bt=ce.request)!=null?bt:{},U=ce.responseData;break}case void 0:throw new Error("Model does not have a default object generation mode.");default:{let q=s;throw new Error(`Unsupported mode: ${q}`)}}function ia(q){let ne=Ee({text:q});if(!ne.success)throw new qe({message:"No object generated: could not parse the response.",cause:ne.error,text:q,response:U,usage:gt(Y)});let J=j.validateFinalResult(ne.value,{text:q,response:U,usage:gt(Y)});if(!J.success)throw new qe({message:"No object generated: response did not match schema.",cause:J.error,text:q,response:U,usage:gt(Y)});return J.value}let Bt;try{Bt=ia(ae)}catch(q){if(A!=null&&qe.isInstance(q)&&(Fe.isInstance(q.cause)||Q.isInstance(q.cause))){let ne=await A({text:ae,error:q.cause});if(ne===null)throw q;Bt=ia(ne)}else throw q}return Se.setAttributes(ht({telemetry:E,attributes:{"ai.response.finishReason":ue,"ai.response.object":{output:()=>JSON.stringify(Bt)},"ai.usage.promptTokens":Y.promptTokens,"ai.usage.completionTokens":Y.completionTokens}})),new ac({object:Bt,finishReason:ue,usage:gt(Y),warnings:F,request:B,response:{...U,headers:Te==null?void 0:Te.headers},logprobs:br,providerMetadata:wr})}})}var ac=class{constructor(t){this.object=t.object,this.finishReason=t.finishReason,this.usage=t.usage,this.warnings=t.warnings,this.providerMetadata=t.providerMetadata,this.experimental_providerMetadata=t.providerMetadata,this.response=t.response,this.request=t.request,this.logprobs=t.logprobs}toJsonResponse(t){var e;return new Response(JSON.stringify(this.object),{status:(e=t==null?void 0:t.status)!=null?e:200,headers:ta(t==null?void 0:t.headers,{contentType:"application/json; charset=utf-8"})})}};var Wh=de({prefix:"aiobj",size:24});var nc="AI_NoOutputSpecifiedError",sc=`vercel.ai.error.${nc}`,oc=Symbol.for(sc),ic;ic=oc;var lc="AI_ToolExecutionError",uc=`vercel.ai.error.${lc}`,cc=Symbol.for(uc),dc;dc=cc;var pc="AI_InvalidToolArgumentsError",mc=`vercel.ai.error.${pc}`,fc=Symbol.for(mc),hc;hc=fc;var gc="AI_NoSuchToolError",yc=`vercel.ai.error.${gc}`,vc=Symbol.for(yc),_c;_c=vc;var bc="AI_ToolCallRepairError",wc=`vercel.ai.error.${bc}`,xc=Symbol.for(wc),Sc;Sc=xc;var Yh=de({prefix:"aitxt",size:24}),Xh=de({prefix:"msg",size:24});var Tc={};ea(Tc,{object:()=>Rc,text:()=>Cc});var Ic="AI_InvalidStreamPartError",Ec=`vercel.ai.error.${Ic}`,kc=Symbol.for(Ec),Ac;Ac=kc;var Cc=()=>({type:"text",responseFormat:()=>({type:"text"}),injectIntoSystemPrompt({system:t}){return t},parsePartial({text:t}){return{partial:t}},parseOutput({text:t}){return t}}),Rc=({schema:t})=>{let e=Lt(t);return{type:"object",responseFormat:({model:r})=>({type:"json",schema:r.supportsStructuredOutputs?e.jsonSchema:void 0}),injectIntoSystemPrompt({system:r,model:a}){return a.supportsStructuredOutputs?r:Qr({prompt:r,schema:e.jsonSchema})},parsePartial({text:r}){let a=ns(r);switch(a.state){case"failed-parse":case"undefined-input":return;case"repaired-parse":case"successful-parse":return{partial:a.value};default:{let n=a.state;throw new Error(`Unsupported parse state: ${n}`)}}},parseOutput({text:r},a){let n=Ee({text:r});if(!n.success)throw new qe({message:"No object generated: could not parse the response.",cause:n.error,text:r,response:a.response,usage:a.usage});let s=ve({value:n.value,schema:e});if(!s.success)throw new qe({message:"No object generated: response did not match schema.",cause:s.error,text:r,response:a.response,usage:a.usage});return s.value}}};function Ys(t,e){let r=t.getReader(),a=e.getReader(),n,s,o=!1,i=!1;async function l(d){try{n==null&&(n=r.read());let f=await n;n=void 0,f.done?d.close():d.enqueue(f.value)}catch(f){d.error(f)}}async function u(d){try{s==null&&(s=a.read());let f=await s;s=void 0,f.done?d.close():d.enqueue(f.value)}catch(f){d.error(f)}}return new ReadableStream({async pull(d){try{if(o){await u(d);return}if(i){await l(d);return}n==null&&(n=r.read()),s==null&&(s=a.read());let{result:f,reader:w}=await Promise.race([n.then(A=>({result:A,reader:r})),s.then(A=>({result:A,reader:a}))]);f.done||d.enqueue(f.value),w===r?(n=void 0,f.done&&(await u(d),o=!0)):(s=void 0,f.done&&(i=!0,await l(d)))}catch(f){d.error(f)}},cancel(){r.cancel(),a.cancel()}})}var rg=de({prefix:"aitxt",size:24}),ag=de({prefix:"msg",size:24});var Nc="AI_NoSuchProviderError",Pc=`vercel.ai.error.${Nc}`,Oc=Symbol.for(Pc),Mc;Mc=Oc;var Dc={};ea(Dc,{mergeIntoDataStream:()=>qc,toDataStream:()=>jc,toDataStreamResponse:()=>$c});function Xs(t={}){let e=new TextEncoder,r="";return new TransformStream({async start(){t.onStart&&await t.onStart()},async transform(a,n){n.enqueue(e.encode(a)),r+=a,t.onToken&&await t.onToken(a),t.onText&&typeof a=="string"&&await t.onText(a)},async flush(){t.onCompletion&&await t.onCompletion(r),t.onFinal&&await t.onFinal(r)}})}function aa(t,e){return t.pipeThrough(new TransformStream({transform:async(r,a)=>{var n;if(typeof r=="string"){a.enqueue(r);return}if("event"in r){r.event==="on_chat_model_stream"&&Es((n=r.data)==null?void 0:n.chunk,a);return}Es(r,a)}})).pipeThrough(Xs(e)).pipeThrough(new TextDecoderStream).pipeThrough(new TransformStream({transform:async(r,a)=>{a.enqueue(cr("text",r))}}))}function jc(t,e){return aa(t,e).pipeThrough(new TextEncoderStream)}function $c(t,e){var r;let a=aa(t,e==null?void 0:e.callbacks).pipeThrough(new TextEncoderStream),n=e==null?void 0:e.data,s=e==null?void 0:e.init,o=n?Ys(n.stream,a):a;return new Response(o,{status:(r=s==null?void 0:s.status)!=null?r:200,statusText:s==null?void 0:s.statusText,headers:ta(s==null?void 0:s.headers,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}function qc(t,e){e.dataStream.merge(aa(t,e.callbacks))}function Es(t,e){if(typeof t.content=="string")e.enqueue(t.content);else{let r=t.content;for(let a of r)a.type==="text"&&e.enqueue(a.text)}}var Uc={};ea(Uc,{mergeIntoDataStream:()=>Vc,toDataStream:()=>Lc,toDataStreamResponse:()=>Fc});function na(t,e){let r=Zc();return en(t[Symbol.asyncIterator]()).pipeThrough(new TransformStream({async transform(a,n){n.enqueue(r(a.delta))}})).pipeThrough(Xs(e)).pipeThrough(new TextDecoderStream).pipeThrough(new TransformStream({transform:async(a,n)=>{n.enqueue(cr("text",a))}}))}function Lc(t,e){return na(t,e).pipeThrough(new TextEncoderStream)}function Fc(t,e={}){var r;let{init:a,data:n,callbacks:s}=e,o=na(t,s).pipeThrough(new TextEncoderStream),i=n?Ys(n.stream,o):o;return new Response(i,{status:(r=a==null?void 0:a.status)!=null?r:200,statusText:a==null?void 0:a.statusText,headers:ta(a==null?void 0:a.headers,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}function Vc(t,e){e.dataStream.merge(na(t,e.callbacks))}function Zc(){let t=!0;return e=>(t&&(e=e.trimStart(),e&&(t=!1)),e)}var ig=15*1e3;function Jc(t){let e=[];for(let{role:r,content:a}of t)switch(r){case"system":{e.push({role:"system",content:a});break}case"user":{if(a.length===1&&a[0].type==="text"){e.push({role:"user",content:a[0].text});break}e.push({role:"user",content:a.map(n=>{var s;switch(n.type){case"text":return{type:"text",text:n.text};case"image":return{type:"image_url",image_url:{url:n.image instanceof URL?n.image.toString():`data:${(s=n.mimeType)!=null?s:"image/jpeg"};base64,${Ct(n.image)}`}};case"file":throw new Ie({functionality:"File content parts in user messages"})}})});break}case"assistant":{let n="",s=[];for(let o of a)switch(o.type){case"text":{n+=o.text;break}case"redacted-reasoning":case"reasoning":break;case"tool-call":{s.push({id:o.toolCallId,type:"function",function:{name:o.toolName,arguments:JSON.stringify(o.args)}});break}default:{let i=o;throw new Error(`Unsupported part: ${i}`)}}e.push({role:"assistant",content:n,tool_calls:s.length>0?s:void 0});break}case"tool":{for(let n of a)e.push({role:"tool",tool_call_id:n.toolCallId,content:JSON.stringify(n.result)});break}default:{let n=r;throw new Error(`Unsupported role: ${n}`)}}return e}function Qs({id:t,model:e,created:r}){return{id:t!=null?t:void 0,modelId:e!=null?e:void 0,timestamp:r!=null?new Date(r*1e3):void 0}}var ro=c.object({error:c.object({message:c.string(),type:c.string()})}),eo=nn({errorSchema:ro,errorToMessage:t=>t.error.message});function Bc({mode:t}){var e;let r=(e=t.tools)!=null&&e.length?t.tools:void 0,a=[];if(r==null)return{tools:void 0,tool_choice:void 0,toolWarnings:a};let n=t.toolChoice,s=[];for(let i of r)i.type==="provider-defined"?a.push({type:"unsupported-tool",tool:i}):s.push({type:"function",function:{name:i.name,description:i.description,parameters:i.parameters}});if(n==null)return{tools:s,tool_choice:void 0,toolWarnings:a};let o=n.type;switch(o){case"auto":case"none":case"required":return{tools:s,tool_choice:o,toolWarnings:a};case"tool":return{tools:s,tool_choice:{type:"function",function:{name:n.toolName}},toolWarnings:a};default:{let i=o;throw new Ie({functionality:`Unsupported tool choice type: ${i}`})}}}function to(t){switch(t){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"unknown"}}var zc=class{constructor(t,e,r){this.specificationVersion="v1",this.supportsStructuredOutputs=!1,this.defaultObjectGenerationMode="json",this.modelId=t,this.settings=e,this.config=r}get provider(){return this.config.provider}get supportsImageUrls(){return!this.settings.downloadImages}getArgs({mode:t,prompt:e,maxTokens:r,temperature:a,topP:n,topK:s,frequencyPenalty:o,presencePenalty:i,stopSequences:l,responseFormat:u,seed:d,stream:f}){let w=t.type,A=[];s!=null&&A.push({type:"unsupported-setting",setting:"topK"}),u!=null&&u.type==="json"&&u.schema!=null&&A.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format schema is not supported"});let E={model:this.modelId,user:this.settings.user,parallel_tool_calls:this.settings.parallelToolCalls,max_tokens:r,temperature:a,top_p:n,frequency_penalty:o,presence_penalty:i,stop:l,seed:d,response_format:f===!1&&(u==null?void 0:u.type)==="json"?{type:"json_object"}:void 0,messages:Jc(e)};switch(w){case"regular":{let{tools:v,tool_choice:k,toolWarnings:N}=Bc({mode:t});return{args:{...E,tools:v,tool_choice:k},warnings:[...A,...N]}}case"object-json":return{args:{...E,response_format:f===!1?{type:"json_object"}:void 0},warnings:A};case"object-tool":return{args:{...E,tool_choice:{type:"function",function:{name:t.tool.name}},tools:[{type:"function",function:{name:t.tool.name,description:t.tool.description,parameters:t.tool.parameters}}]},warnings:A};default:{let v=w;throw new Error(`Unsupported type: ${v}`)}}}async doGenerate(t){var e,r,a,n,s,o;let{args:i,warnings:l}=this.getArgs({...t,stream:!1}),u=JSON.stringify(i),{responseHeaders:d,value:f}=await Cr({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:kr(this.config.headers(),t.headers),body:i,failedResponseHandler:eo,successfulResponseHandler:on(Gc),abortSignal:t.abortSignal,fetch:this.config.fetch}),{messages:w,...A}=i,E=f.choices[0];return{text:(e=E.message.content)!=null?e:void 0,toolCalls:(r=E.message.tool_calls)==null?void 0:r.map(v=>{var k;return{toolCallType:"function",toolCallId:(k=v.id)!=null?k:tr(),toolName:v.function.name,args:v.function.arguments}}),finishReason:to(E.finish_reason),usage:{promptTokens:(n=(a=f.usage)==null?void 0:a.prompt_tokens)!=null?n:NaN,completionTokens:(o=(s=f.usage)==null?void 0:s.completion_tokens)!=null?o:NaN},rawCall:{rawPrompt:w,rawSettings:A},rawResponse:{headers:d},response:Qs(f),warnings:l,request:{body:u}}}async doStream(t){let{args:e,warnings:r}=this.getArgs({...t,stream:!0}),a=JSON.stringify({...e,stream:!0}),{responseHeaders:n,value:s}=await Cr({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:kr(this.config.headers(),t.headers),body:{...e,stream:!0},failedResponseHandler:eo,successfulResponseHandler:sn(Kc),abortSignal:t.abortSignal,fetch:this.config.fetch}),{messages:o,...i}=e,l=[],u="unknown",d={promptTokens:void 0,completionTokens:void 0},f=!0,w;return{stream:s.pipeThrough(new TransformStream({transform(A,E){var v,k,N,D,I,le,P,j,he,ge,Se,yt,vt,_t,bt;if(!A.success){u="error",E.enqueue({type:"error",error:A.error});return}let ae=A.value;if("error"in ae){u="error",E.enqueue({type:"error",error:ae.error});return}f&&(f=!1,E.enqueue({type:"response-metadata",...Qs(ae)})),((v=ae.x_groq)==null?void 0:v.usage)!=null&&(d={promptTokens:(k=ae.x_groq.usage.prompt_tokens)!=null?k:void 0,completionTokens:(N=ae.x_groq.usage.completion_tokens)!=null?N:void 0});let ue=ae.choices[0];if((ue==null?void 0:ue.finish_reason)!=null&&(u=to(ue.finish_reason)),(ue==null?void 0:ue.delta)==null)return;let Y=ue.delta;if(Y.content!=null&&E.enqueue({type:"text-delta",textDelta:Y.content}),Y.tool_calls!=null)for(let F of Y.tool_calls){let Te=F.index;if(l[Te]==null){if(F.type!=="function")throw new Wt({data:F,message:"Expected 'function' type."});if(F.id==null)throw new Wt({data:F,message:"Expected 'id' to be a string."});if(((D=F.function)==null?void 0:D.name)==null)throw new Wt({data:F,message:"Expected 'function.name' to be a string."});l[Te]={id:F.id,type:"function",function:{name:F.function.name,arguments:(I=F.function.arguments)!=null?I:""},hasFinished:!1};let B=l[Te];((le=B.function)==null?void 0:le.name)!=null&&((P=B.function)==null?void 0:P.arguments)!=null&&(B.function.arguments.length>0&&E.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:B.id,toolName:B.function.name,argsTextDelta:B.function.arguments}),Ar(B.function.arguments)&&(E.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(j=B.id)!=null?j:tr(),toolName:B.function.name,args:B.function.arguments}),B.hasFinished=!0));continue}let U=l[Te];U.hasFinished||(((he=F.function)==null?void 0:he.arguments)!=null&&(U.function.arguments+=(Se=(ge=F.function)==null?void 0:ge.arguments)!=null?Se:""),E.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:U.id,toolName:U.function.name,argsTextDelta:(yt=F.function.arguments)!=null?yt:""}),((vt=U.function)==null?void 0:vt.name)!=null&&((_t=U.function)==null?void 0:_t.arguments)!=null&&Ar(U.function.arguments)&&(E.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(bt=U.id)!=null?bt:tr(),toolName:U.function.name,args:U.function.arguments}),U.hasFinished=!0))}},flush(A){var E,v;A.enqueue({type:"finish",finishReason:u,usage:{promptTokens:(E=d.promptTokens)!=null?E:NaN,completionTokens:(v=d.completionTokens)!=null?v:NaN},...w!=null?{providerMetadata:w}:{}})}})),rawCall:{rawPrompt:o,rawSettings:i},rawResponse:{headers:n},warnings:r,request:{body:a}}}},Gc=c.object({id:c.string().nullish(),created:c.number().nullish(),model:c.string().nullish(),choices:c.array(c.object({message:c.object({role:c.literal("assistant").nullish(),content:c.string().nullish(),tool_calls:c.array(c.object({id:c.string().nullish(),type:c.literal("function"),function:c.object({name:c.string(),arguments:c.string()})})).nullish()}),index:c.number(),finish_reason:c.string().nullish()})),usage:c.object({prompt_tokens:c.number().nullish(),completion_tokens:c.number().nullish()}).nullish()}),Kc=c.union([c.object({id:c.string().nullish(),created:c.number().nullish(),model:c.string().nullish(),choices:c.array(c.object({delta:c.object({role:c.enum(["assistant"]).nullish(),content:c.string().nullish(),tool_calls:c.array(c.object({index:c.number(),id:c.string().nullish(),type:c.literal("function").optional(),function:c.object({name:c.string().nullish(),arguments:c.string().nullish()})})).nullish()}).nullish(),finish_reason:c.string().nullable().optional(),index:c.number()})),x_groq:c.object({usage:c.object({prompt_tokens:c.number().nullish(),completion_tokens:c.number().nullish()}).nullish()}).nullish()}),ro]);function sa(t={}){var e;let r=(e=un(t.baseURL))!=null?e:"https://api.groq.com/openai/v1",a=()=>({Authorization:`Bearer ${an({apiKey:t.apiKey,environmentVariableName:"GROQ_API_KEY",description:"Groq"})}`,...t.headers}),n=(i,l={})=>new zc(i,l,{provider:"groq.chat",url:({path:u})=>`${r}${u}`,headers:a,fetch:t.fetch}),s=(i,l)=>{if(new.target)throw new Error("The Groq model function cannot be called with the new keyword.");return n(i,l)},o=function(i,l){return s(i,l)};return o.languageModel=s,o.chat=n,o.textEmbeddingModel=i=>{throw new La({modelId:i,modelType:"textEmbeddingModel"})},o}var kg=sa();var Wc={withContext:!1,withLaTeX:!1,model:"llama-3.3-70b-versatile",apiKey:"",baseUrl:"https://api.groq.com/openai/v1"},_r=class extends Z.Plugin{constructor(){super(...arguments);this.normalPrompt=`\u4F60\u8981\u5C06\u7528\u6237\u7684<\u5F85\u8F6C\u6362\u62FC\u97F3>\u62FC\u5199\u4E3A\u6B63\u786E\u7684\u4E2D\u6587\uFF0C\u8F93\u51FA\u8FC7\u7A0B\u5206\u4E3A\u4E94\u6B65\uFF0C\u5C06\u4EE5json\u683C\u5F0F\u9010\u6B65\u6253\u5370\u6BCF\u4E00\u6B65\u7684\u8F93\u51FA\u7ED3\u679C\uFF1A
step1\uFF1A\u5C06\u7528\u6237\u7684\u62FC\u97F3\u5206\u8BCD\u62C6\u5206\u4E3A\u6709\u610F\u4E49\u3001\u80FD\u62FC\u5199\u7684\u9010\u4E2A\u6C49\u5B57\u62FC\u97F3\uFF0C\u6BCF\u4E2A\u6C49\u5B57\u62FC\u97F3\u7528\u7A7A\u683C\u5206\u9694\u3002
step2\uFF1A\u6839\u636E\u7B2C\u4E00\u6B65\u7684\u62FC\u97F3\u5206\u8BCD\u7ED3\u679C\uFF0C\u5148\u5206\u6790\u539F\u53E5\uFF0C\u6307\u51FA\u5E76\u4FEE\u590D\u7528\u6237\u53EF\u80FD\u5B58\u5728\u7684\u62FC\u97F3\u62FC\u5199\u9519\u8BEF\uFF0C\u7136\u540E\u7ED3\u5408\u7B2C\u4E00\u6B65\u7684\u8F93\u51FA\u7ED3\u679C\uFF0C\u8F93\u51FA\u6BCF\u4E2A\u62FC\u97F3\u6807\u6CE8\u58F0\u8C03\u540E\u7684\u7ED3\u679C
step3\uFF1A\u6839\u636E\u7B2C\u4E8C\u6B65\u7684\u8F93\u51FA\u7ED3\u679C\uFF0C\u9010\u5B57\u62FC\u5199\u4E3A\u4E2D\u6587\u53E5\u5B50
step4\uFF1A\u6839\u636E\u7B2C\u4E09\u6B65\u548C\u7B2C\u4E8C\u6B65\u7684\u7ED3\u679C\uFF0C\u5206\u6790\u662F\u5426\u53EF\u80FD\u5B58\u5728\u62FC\u97F3\u5206\u8BCD\u3001\u62FC\u97F3\u62FC\u5199\u7B49\u9519\u8BEF\uFF0C\u62FC\u5199\u7684\u5404\u4E2A\u6C49\u5B57\u5728\u53E5\u5B50\u4E2D\u662F\u5426\u5177\u6709\u5408\u7406\u3001\u6B63\u786E\u7684\u610F\u4E49\uFF0C\u6307\u51FA\u7591\u70B9\u548C\u4E0D\u901A\u987A\u7684\u5730\u65B9
step5\uFF1A\u8FD9\u662F\u6700\u540E\u4E00\u6B65\uFF0C\u6839\u636E\u7B2C\u4E09\u6B65\u7684\u521D\u6B65\u7ED3\u679C\u548C\u7B2C\u56DB\u6B65\u7684\u7591\u70B9\u5206\u6790\uFF0C\u4FEE\u6B63\u53EF\u80FD\u6709\u8BEF\u7684\u5355\u8BCD\u62FC\u5199\uFF0C\u5C06\u7528\u6237\u8F93\u5165\u7684\u4E2D\u6587\u62FC\u97F3\u5728\u5C0A\u91CD\u4FDD\u7559\u539F\u4E49\u7684\u57FA\u7840\u4E0A\u62FC\u5199\u4E3A\u6B63\u786E\u3001\u6D41\u7545\u7684\u4E2D\u6587\uFF0C\u7ED9\u51FA\u6700\u7EC8\u62FC\u5199\u7ED3\u679C\u3002
`;this.mathPrompt=`\u4F60\u8981\u5C06\u7528\u6237\u7684<\u5F85\u8F6C\u6362\u62FC\u97F3>\u62FC\u5199\u4E3A\u6B63\u786E\u7684\u4E2D\u6587\uFF0C\u81EA\u7136\u8BED\u8A00\u63CF\u8FF0\u7684\u6570\u5B66\u8868\u8FBE\u5F0F\u8F6C\u6362\u4E3A\u89C4\u8303\u7684 MathJax \u8BED\u6CD5\u6E32\u67D3\uFF0C\u8F93\u51FA\u8FC7\u7A0B\u5206\u4E3A\u4E03\u6B65\uFF0C\u5C06\u4EE5 json \u683C\u5F0F\u9010\u6B65\u6253\u5370\u6BCF\u4E00\u6B65\u7684\u8F93\u51FA\u7ED3\u679C\uFF1A
step1\uFF1A\u4FDD\u7559\u5C0A\u91CD\u539F\u6587\u6240\u6709\u8BED\u4E49\uFF0C\u5C06\u7528\u6237\u7684\u62FC\u97F3\u5206\u8BCD\u62C6\u5206\u4E3A\u6709\u610F\u4E49\u3001\u80FD\u62FC\u5199\u7684\u9010\u4E2A\u6C49\u5B57\u62FC\u97F3\uFF0C\u6BCF\u4E2A\u6C49\u5B57\u62FC\u97F3\u7528\u7A7A\u683C\u5206\u9694\u3002
step2\uFF1A\u6839\u636E\u7B2C\u4E00\u6B65\u7684\u62FC\u97F3\u5206\u8BCD\u7ED3\u679C\uFF0C\u5148\u5206\u6790\u539F\u53E5\uFF0C\u6307\u51FA\u5E76\u4FEE\u590D\u7528\u6237\u53EF\u80FD\u5B58\u5728\u7684\u62FC\u97F3\u62FC\u5199\u9519\u8BEF\uFF0C\u7136\u540E\u7ED3\u5408\u7B2C\u4E00\u6B65\u7684\u8F93\u51FA\u7ED3\u679C\uFF0C\u8F93\u51FA\u6BCF\u4E2A\u62FC\u97F3\u6807\u6CE8\u58F0\u8C03\u540E\u7684\u7ED3\u679C
step3\uFF1A\u6839\u636E\u7B2C\u4E8C\u6B65\u7684\u8F93\u51FA\u7ED3\u679C\uFF0C\u9010\u5B57\u62FC\u5199\u4E3A\u4E2D\u6587\u53E5\u5B50
step4\uFF1A\u6839\u636E\u7B2C\u4E09\u6B65\u548C\u7B2C\u4E8C\u6B65\u7684\u7ED3\u679C\uFF0C\u5206\u6790\u662F\u5426\u53EF\u80FD\u5B58\u5728\u62FC\u97F3\u5206\u8BCD\u3001\u62FC\u97F3\u62FC\u5199\u7B49\u9519\u8BEF\uFF0C\u62FC\u5199\u7684\u5404\u4E2A\u6C49\u5B57\u5728\u53E5\u5B50\u4E2D\u662F\u5426\u5177\u6709\u5408\u7406\u3001\u6B63\u786E\u7684\u610F\u4E49\uFF0C\u6307\u51FA\u7591\u70B9\u548C\u4E0D\u901A\u987A\u7684\u5730\u65B9
step5\uFF1A\u6839\u636E\u7B2C\u4E09\u6B65\u7684\u521D\u6B65\u7ED3\u679C\u548C\u7B2C\u56DB\u6B65\u7684\u7591\u70B9\u5206\u6790\uFF0C\u4FEE\u6B63\u53EF\u80FD\u6709\u8BEF\u7684\u5355\u8BCD\u62FC\u5199\uFF0C\u5C06\u7528\u6237\u8F93\u5165\u7684\u4E2D\u6587\u62FC\u97F3\u5728\u4FDD\u7559\u5C0A\u91CD\u539F\u6587\u6240\u6709\u8BED\u4E49\u7684\u57FA\u7840\u4E0A\u62FC\u5199\u4E3A\u6B63\u786E\u7684\u4E2D\u6587\u53E5\u5B50\uFF0C\u7ED9\u51FA\u6700\u7EC8\u62FC\u5199\u7ED3\u679C\u3002
step6\uFF1A\u6839\u636E\u7B2C\u4E94\u6B65\u7684\u4E2D\u6587\u81EA\u7136\u8BED\u8A00\u62FC\u5199\u7ED3\u679C\uFF0C\u63D0\u53D6\u5176\u4E2D\u6240\u6709\u81EA\u7136\u8BED\u8A00\u63CF\u8FF0\u7684\u6570\u5B66\u8868\u8FBE\u5F0F\u90E8\u5206\uFF08\u4EE5format1\u3001format2 ... \u679A\u4E3E\uFF09\uFF0C\u7136\u540E\u4EE5 MathJax \u8BED\u6CD5\u683C\u5F0F($)\u91CD\u5199\u4E3A\u53EF\u6E32\u67D3\u7684\u8868\u8FBE\u5F0F
step7\uFF1A\u7ED3\u5408\u7B2C\u4E94\u6B65\u548C\u7B2C\u516D\u6B65\u7684\u8F93\u51FA\u7ED3\u679C\uFF0C\u5C06\u7B2C\u4E94\u6B65\u7684\u7ED3\u679C\u91CC\u4E2D\u6587\u63CF\u8FF0\u7684\u6570\u5B66\u8868\u8FBE\u5F0F\u7528\u7B2C\u516D\u6B65\u4E2D\u7684 MathJax \u8868\u8FBE\u66FF\u6362\uFF0C\u7ED9\u51FA\u6700\u7EC8\u7ED3\u679C\uFF0C\u4E25\u7981\u5BF9\u7ED3\u679C\u8FDB\u884C\u4F5C\u7B54\u3001\u89E3\u91CA\uFF0C\u8BF4\u660E\uFF0C\u8F93\u51FA\u989D\u5916\u5185\u5BB9\uFF0C\u4EC5\u8FDB\u884C\u8F6C\u5199\uFF0C\u4F7F\u5F97\u6574\u4F53\u4E0A\u5448\u73B0\u4E3A\u7406\u5DE5\u79D1\u6559\u79D1\u4E66\u7684\u8BED\u8A00\u3001\u6392\u7248\u98CE\u683C
`;this.normalSchema=c.object({step1:c.object({output:c.string()}),step2:c.object({analysis:c.string(),output:c.string()}),step3:c.object({output:c.string()}),step4:c.object({analysis:c.string()}),step5:c.object({analysis:c.string(),output:c.string()})});this.mathSchema=c.object({step1:c.object({output:c.string()}),step2:c.object({analysis:c.string(),output:c.string()}),step3:c.object({output:c.string()}),step4:c.object({analysis:c.string()}),step5:c.object({output:c.string()}),step6:c.object({format1:c.object({origin:c.string(),mathjax:c.string()}).describe("format1, format2 ... and so on")}),step7:c.object({output:c.string()})})}async onload(){await this.loadSettings(),this.addCommand({id:"convert-to-characters-math",name:"\u8F6C\u6362\u4E3A\u6C49\u5B57\u548CLaTex",editorCallback:r=>{this.convertToCharacters(r)}}),this.addSettingTab(new oa(this.app,this))}getContext(r){let a=r.getCursor(),n=Math.max(0,a.line-3),s="";for(let o=n;o<a.line;o++)s+=r.getLine(o)+`
`;return s.length>1e3&&(s=s.substring(0,1e3)),s}async convertToCharacters(r){let a=r.getCursor(),n=r.getLine(a.line);if(!n.trim()){new Z.Notice("\u5F53\u524D\u884C\u4E3A\u7A7A\uFF0C\u65E0\u6CD5\u8F6C\u6362");return}let s="";this.settings.withContext&&(s=this.getContext(r)),new Z.Notice("\u6B63\u5728\u8F6C\u6362\u4E2D...");try{let o=await this.callAPI(n,s);o?(r.replaceRange(o,{line:a.line,ch:0},{line:a.line,ch:n.length}),new Z.Notice("\u8F6C\u6362\u5B8C\u6210")):new Z.Notice("\u8F6C\u6362\u7ED3\u679C\u4E3A\u7A7A")}catch(o){console.error("\u8F6C\u6362\u8FC7\u7A0B\u4E2D\u53D1\u751F\u9519\u8BEF:",o),new Z.Notice("\u8F6C\u6362\u5931\u8D25\uFF0C\u8BF7\u67E5\u770B\u63A7\u5236\u53F0\u65E5\u5FD7")}}async callAPI(r,a=""){let n=this.settings.withLaTeX,s=n?this.mathPrompt:this.normalPrompt,o=this.settings.withContext?`${s} 
 <\u53C2\u8003\u4E0A\u4E0B\u6587> \u5E2E\u52A9\u5206\u6790\u53E5\u4E49\uFF0C\u4E0D\u53C2\u4E0E\u6700\u7EC8\u8F6C\u6362\u8FC7\u7A0B`:s,i=a?`<\u53C2\u8003\u4E0A\u4E0B\u6587>${a}<\u53C2\u8003\u4E0A\u4E0B\u6587/>
<\u5F85\u8F6C\u6362\u62FC\u97F3>${r}<\u5F85\u8F6C\u6362\u62FC\u97F3/>`:`<\u5F85\u8F6C\u6362\u62FC\u97F3>${r}<\u5F85\u8F6C\u6362\u62FC\u97F3/>`,l=this.settings.model,u=sa({baseURL:this.settings.baseUrl,apiKey:this.settings.apiKey});try{if(n){let{object:d}=await ra({model:u(l),schema:this.mathSchema,temperature:.5,system:o,prompt:i});return d.step7.output}else{let{object:d}=await ra({model:u(l),schema:this.normalSchema,temperature:.5,system:o,prompt:i});return d.step5.output}}catch(d){return console.error(d),new Z.Notice("\u8F6C\u6362\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u8BBE\u7F6E\u548C\u63A7\u5236\u53F0\u65E5\u5FD7"),""}}async loadSettings(){this.settings=Object.assign({},Wc,await this.loadData())}async saveSettings(){await this.saveData(this.settings)}},oa=class extends Z.PluginSettingTab{constructor(r,a){super(r,a);this.plugin=a}display(){let{containerEl:r}=this;r.empty(),new Z.Setting(r).setName("\u5305\u542B\u7B14\u8BB0\u4E0A\u4E0B\u6587").setDesc("\u6D88\u8017\u66F4\u591A tokens \u4EE5\u53CA\u7A0D\u6162\u54CD\u5E94\uFF0C\u4F46\u53EF\u80FD\u6709\u66F4\u597D\u7684\u8F6C\u6362\u6548\u679C").addToggle(a=>a.setValue(this.plugin.settings.withContext).onChange(async n=>{this.plugin.settings.withContext=n,await this.plugin.saveSettings()})),new Z.Setting(r).setName("\u4F7F\u7528 LaTeX \u6A21\u5F0F").setDesc("\u81EA\u7136\u8BED\u8A00\u63CF\u8FF0\u7684\u6570\u5B66\u8868\u8FBE\u5F0F\u8F6C\u6362\u4E3A LaTex\uFF0C\u548C\u5305\u542B\u4E0A\u4E0B\u6587\u540C\u65F6\u5F00\u542F\u53EF\u80FD\u5F15\u8D77\u4E0D\u5FC5\u8981\u7684\u8F93\u51FA").addToggle(a=>a.setValue(this.plugin.settings.withLaTeX).onChange(async n=>{this.plugin.settings.withLaTeX=n,await this.plugin.saveSettings()})),new Z.Setting(r).setName("API Base URL").setDesc("\u5EFA\u8BAE\u6CE8\u518C\u514D\u8D39\u7684groq\uFF0C\u5FC5\u987B\u643A\u5E26v1\uFF0C\u4F8B\u5982\uFF1Ahttps://api.groq.com/openai/v1").addText(a=>a.setPlaceholder("https://api.groq.com/openai/v1").setValue(this.plugin.settings.baseUrl).onChange(async n=>{this.plugin.settings.baseUrl=n,await this.plugin.saveSettings()})),new Z.Setting(r).setName("\u6A21\u578B").setDesc("\u5C3D\u91CF\u4F7F\u7528\u53EF\u4EE5\u7ED3\u6784\u5316\u8F93\u51FA\u7684\u6A21\u578B\uFF0C\u4F8B\u5982\uFF1Allama-3.3-70b-versatile").addText(a=>a.setPlaceholder("\u8BF7\u8F93\u5165\u6A21\u578B\u540D\u79F0").setValue(this.plugin.settings.model).onChange(async n=>{this.plugin.settings.model=n,await this.plugin.saveSettings()})),new Z.Setting(r).setName("API Key").setDesc("\u7528\u4E8E\u8C03\u7528 API \u7684\u5BC6\u94A5").addText(a=>a.setPlaceholder("\u8BF7\u8F93\u5165 API Key").setValue(this.plugin.settings.apiKey).onChange(async n=>{this.plugin.settings.apiKey=n,await this.plugin.saveSettings()}))}};

/* nosourcemap */